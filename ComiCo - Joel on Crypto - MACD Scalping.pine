Script Name: ComiCo - Joel on Crypto - MACD Scalping
Author: bkomoroczy
Description: This is a modified (hopefully improved) version of the "Joel on Crypto - MACD Scalping" indicator. It got turned into a strategy, and added some extra filters, like number of trades after EMA cross, minimal EMA distance (EMA 50's distance from the EMA 200). It is just an experiment to see how good this scalping strategy can get.

Play around with it and let me...
PineScript code:

Pine Scriptâ„¢ strategy
ComiCo - Joel on Crypto - MACD Scalping
//  This  source  code  is  subject  to  the  terms  of  the  Mozilla  Public  License  2.0  at  https://mozilla.org/MPL/2.0/
//@version=5
strategy(title="ComiCo  -  Joel  on  Crypto  -  MACD  Scalping",  shorttitle="ComiCo  -  Joel  on  Crypto  -  MACD  Scalping",
overlay=false,  default_qty_type  =  strategy.percent_of_equity,  default_qty_value=100,  margin_long=1./50*100,
margin_short=1./50*100,  pyramiding  =  14)
//Get  High  impact  USD  related  economic  news  from  MyFxBook  converted  to  Pinescript's  matching  formats
var  EventNameTypes  =  array.from("ISM  Manufacturing  PMI",  "ADP  Employment  Change",  "Markit  Services/Composite  PMI",
"Markit  Manufacturing  PMI",  "Balance  of  Trade",  "Jobless  Claims",  "ISM  Non-Manufacturing  PMI",  "Non  Farm  Payrolls",
"CPI",  "Inflation  Rate",  "Fed  Chair",  "Retail  Sales",  "Michigan  Consumer  Sentiment",  "Treasury  Secretary",  "Existing
Home  Sales",  "Durable  Goods  Orders",  "Fed  Interest  Rate  Decision",  "GDP",  "Goods  Trade  Balance",  "New  Home  Sales",
"Personal  Income/Spending",  "FOMC  Minutes",  "Fed  Press  Conference",  "FakeTypeForTesting")
var  EventTypeAvoidance  =  array.new_bool(array.size(EventNameTypes),  false)
var  EventTimestamps  =  array.from(timestamp(2021,  01,  04,  12,  45,  00),  timestamp(2021,  01,  05,  13,  00,  00),  timestamp
(2021,  01,  06,  11,  15,  00),  timestamp(2021,  01,  06,  12,  45,  00),  timestamp(2021,  01,  07,  11,  30,  00),  timestamp(2021,
01,  07,  11,  30,  00),  timestamp(2021,  01,  07,  13,  00,  00),  timestamp(2021,  01,  08,  11,  30,  00),  timestamp(2021,  01,  13,
11,  30,  00),  timestamp(2021,  01,  14,  11,  30,  00),  timestamp(2021,  01,  14,  15,  30,  00),  timestamp(2021,  01,  15,  11,  30,
00),  timestamp(2021,  01,  15,  13,  00,  00),  timestamp(2021,  01,  19,  13,  00,  00),  timestamp(2021,  01,  21,  11,  30,  00),
timestamp(2021,  01,  22,  12,  45,  00),  timestamp(2021,  01,  22,  12,  45,  00),  timestamp(2021,  01,  22,  13,  00,  00),  timestamp
(2021,  01,  27,  11,  30,  00),  timestamp(2021,  01,  27,  17,  00,  00),  timestamp(2021,  01,  27,  17,  30,  00),  timestamp(2021,
01,  28,  11,  30,  00),  timestamp(2021,  01,  28,  11,  30,  00),  timestamp(2021,  01,  28,  11,  30,  00),  timestamp(2021,  01,  28,
13,  00,  00),  timestamp(2021,  01,  29,  11,  30,  00),  timestamp(2021,  01,  29,  13,  00,  00),  timestamp(2021,  02,  01,  12,  45,
00),  timestamp(2021,  02,  01,  13,  00,  00),  timestamp(2021,  02,  03,  11,  15,  00),  timestamp(2021,  02,  03,  12,  45,  00),
timestamp(2021,  02,  03,  13,  00,  00),  timestamp(2021,  02,  04,  11,  30,  00),  timestamp(2021,  02,  05,  11,  30,  00),  timestamp
(2021,  02,  05,  11,  30,  00),  timestamp(2021,  02,  10,  11,  30,  00),  timestamp(2021,  02,  10,  17,  00,  00),  timestamp(2021,
02,  11,  11,  30,  00),  timestamp(2021,  02,  12,  13,  00,  00),  timestamp(2021,  02,  17,  11,  30,  00),  timestamp(2021,  02,  17,
17,  00,  00),  timestamp(2021,  02,  18,  11,  30,  00),  timestamp(2021,  02,  19,  12,  45,  00),  timestamp(2021,  02,  19,  12,  45,
00),  timestamp(2021,  02,  19,  13,  00,  00),  timestamp(2021,  02,  23,  13,  00,  00),  timestamp(2021,  02,  24,  13,  00,  00),
timestamp(2021,  02,  24,  13,  00,  00),  timestamp(2021,  02,  25,  11,  30,  00),  timestamp(2021,  02,  25,  11,  30,  00),  timestamp
(2021,  02,  26,  11,  30,  00),  timestamp(2021,  02,  26,  11,  30,  00),  timestamp(2021,  02,  26,  13,  00,  00),  timestamp(2021,
03,  01,  12,  45,  00),  timestamp(2021,  03,  01,  13,  00,  00),  timestamp(2021,  03,  03,  11,  15,  00),  timestamp(2021,  03,  03,
12,  45,  00),  timestamp(2021,  03,  03,  13,  00,  00),  timestamp(2021,  03,  04,  11,  30,  00),  timestamp(2021,  03,  04,  15,  05,
00),  timestamp(2021,  03,  05,  11,  30,  00),  timestamp(2021,  03,  05,  11,  30,  00),  timestamp(2021,  03,  10,  11,  30,  00),
timestamp(2021,  03,  11,  11,  30,  00),  timestamp(2021,  03,  12,  13,  00,  00),  timestamp(2021,  03,  16,  10,  30,  00),  timestamp
(2021,  03,  17,  16,  00,  00),  timestamp(2021,  03,  17,  16,  30,  00),  timestamp(2021,  03,  18,  10,  30,  00),  timestamp(2021,
03,  22,  11,  00,  00),  timestamp(2021,  03,  22,  12,  00,  00),  timestamp(2021,  03,  23,  12,  00,  00),  timestamp(2021,  03,  23,
14,  00,  00),  timestamp(2021,  03,  24,  10,  30,  00),  timestamp(2021,  03,  24,  11,  45,  00),  timestamp(2021,  03,  24,  11,  45,
00),  timestamp(2021,  03,  24,  12,  00,  00),  timestamp(2021,  03,  25,  10,  30,  00),  timestamp(2021,  03,  26,  09,  30,  00),
timestamp(2021,  03,  26,  09,  30,  00),  timestamp(2021,  03,  26,  11,  00,  00),  timestamp(2021,  03,  31,  09,  15,  00),  timestamp
(2021,  04,  01,  09,  30,  00),  timestamp(2021,  04,  01,  10,  45,  00),  timestamp(2021,  04,  01,  11,  00,  00),  timestamp(2021,
04,  02,  09,  30,  00),  timestamp(2021,  04,  05,  10,  45,  00),  timestamp(2021,  04,  05,  11,  00,  00),  timestamp(2021,  04,  07,
09,  30,  00),  timestamp(2021,  04,  07,  15,  00,  00),  timestamp(2021,  04,  08,  09,  30,  00),  timestamp(2021,  04,  08,  13,  00,
00),  timestamp(2021,  04,  13,  09,  30,  00),  timestamp(2021,  04,  14,  13,  00,  00),  timestamp(2021,  04,  15,  09,  30,  00),
timestamp(2021,  04,  15,  09,  30,  00),  timestamp(2021,  04,  16,  11,  00,  00),  timestamp(2021,  04,  22,  09,  30,  00),  timestamp
(2021,  04,  22,  11,  00,  00),  timestamp(2021,  04,  23,  10,  45,  00),  timestamp(2021,  04,  23,  10,  45,  00),  timestamp(2021,
04,  23,  11,  00,  00),  timestamp(2021,  04,  26,  09,  30,  00),  timestamp(2021,  04,  28,  09,  30,  00),  timestamp(2021,  04,  28,
15,  00,  00),  timestamp(2021,  04,  28,  15,  30,  00),  timestamp(2021,  04,  29,  09,  30,  00),  timestamp(2021,  04,  29,  09,  30,
00),  timestamp(2021,  04,  30,  09,  30,  00),  timestamp(2021,  04,  30,  11,  00,  00),  timestamp(2021,  05,  03,  10,  45,  00),
timestamp(2021,  05,  03,  11,  00,  00),  timestamp(2021,  05,  03,  15,  20,  00),  timestamp(2021,  05,  04,  09,  30,  00),  timestamp
(2021,  05,  05,  09,  15,  00),  timestamp(2021,  05,  05,  10,  45,  00),  timestamp(2021,  05,  05,  11,  00,  00),  timestamp(2021,
05,  06,  09,  30,  00),  timestamp(2021,  05,  07,  09,  30,  00),  timestamp(2021,  05,  12,  09,  30,  00),  timestamp(2021,  05,  13,
09,  30,  00),  timestamp(2021,  05,  14,  09,  30,  00),  timestamp(2021,  05,  14,  11,  00,  00),  timestamp(2021,  05,  19,  15,  00,
00),  timestamp(2021,  05,  20,  09,  30,  00),  timestamp(2021,  05,  21,  10,  45,  00),  timestamp(2021,  05,  21,  10,  45,  00),
timestamp(2021,  05,  21,  11,  00,  00),  timestamp(2021,  05,  25,  11,  00,  00),  timestamp(2021,  05,  27,  09,  30,  00),  timestamp
(2021,  05,  27,  09,  30,  00),  timestamp(2021,  05,  28,  09,  30,  00),  timestamp(2021,  05,  28,  09,  30,  00),  timestamp(2021,
05,  28,  11,  00,  00),  timestamp(2021,  06,  01,  10,  45,  00),  timestamp(2021,  06,  01,  11,  00,  00),  timestamp(2021,  06,  03,
09,  15,  00),  timestamp(2021,  06,  03,  09,  30,  00),  timestamp(2021,  06,  03,  10,  45,  00),  timestamp(2021,  06,  03,  11,  00,
00),  timestamp(2021,  06,  04,  08,  00,  00),  timestamp(2021,  06,  04,  09,  30,  00),  timestamp(2021,  06,  08,  09,  30,  00),
timestamp(2021,  06,  10,  09,  30,  00),  timestamp(2021,  06,  10,  09,  30,  00),  timestamp(2021,  06,  11,  11,  00,  00),  timestamp
(2021,  06,  15,  09,  30,  00),  timestamp(2021,  06,  16,  15,  00,  00),  timestamp(2021,  06,  16,  15,  30,  00),  timestamp(2021,
06,  17,  09,  30,  00),timestamp(2021,06,22,11,00,00),timestamp(2021,06,22,15,00,00),timestamp(2021,06,23,
10,45,00),timestamp(2021,06,23,10,45,00),timestamp(2021,06,23,11,00,00),timestamp(2021,06,24,09,30,
00),timestamp(2021,06,24,09,30,00),timestamp(2021,06,24,09,30,00),timestamp(2021,06,25,09,30,00),
timestamp(2021,06,25,11,00,00),timestamp(2021,06,30,09,15,00),timestamp(2021,07,01,09,30,00),timestamp
(2021,07,01,10,45,00),timestamp(2021,07,01,11,00,00),timestamp(2021,07,02,09,30,00),timestamp(2021,
07,02,09,30,00),timestamp(2021,07,06,10,45,00),timestamp(2021,07,06,11,00,00),timestamp(2021,07,07,
15,00,00),timestamp(2021,07,08,09,30,00),timestamp(2021,07,13,09,30,00),timestamp(2021,07,14,13,00,
00),timestamp(2021,07,15,09,30,00),timestamp(2021,07,15,10,30,00),timestamp(2021,07,16,09,30,00),
timestamp(2021,07,16,11,00,00),timestamp(2021,07,22,09,30,00),timestamp(2021,07,22,11,00,00),timestamp
(2021,07,23,10,45,00),timestamp(2021,07,23,10,45,00),timestamp(2021,07,26,11,00,00),timestamp(2021,
07,27,09,30,00),timestamp(2021,07,28,09,30,00),timestamp(2021,07,28,15,00,00),timestamp(2021,07,28,
15,30,00),timestamp(2021,07,29,09,30,00),timestamp(2021,07,29,09,30,00),timestamp(2021,07,30,09,30,
00),timestamp(2021,07,30,11,00,00),timestamp(2021,08,02,10,45,00),timestamp(2021,08,02,11,00,00),
timestamp(2021,08,04,09,15,00),timestamp(2021,08,04,10,45,00),timestamp(2021,08,04,11,00,00),timestamp
(2021,08,05,09,30,00),timestamp(2021,08,05,09,30,00),timestamp(2021,08,06,09,30,00),timestamp(2021,
08,11,09,30,00),timestamp(2021,08,12,09,30,00),timestamp(2021,08,13,11,00,00),timestamp(2021,08,17,
12,30,00),timestamp(2021,08,17,17,30,00),timestamp(2021,08,18,18,00,00),timestamp(2021,08,19,12,30,
00),timestamp(2021,08,23,13,45,00),timestamp(2021,08,23,13,45,00),timestamp(2021,08,23,14,00,00),
timestamp(2021,08,24,14,00,00),timestamp(2021,08,25,12,30,00),timestamp(2021,08,26,12,30,00),timestamp
(2021,08,27,12,30,00),timestamp(2021,08,27,12,30,00),timestamp(2021,08,27,14,00,00),timestamp(2021,
08,27,14,00,00),timestamp(2021,09,01,12,15,00),timestamp(2021,09,01,13,45,00),timestamp(2021,09,01,
14,00,00),timestamp(2021,09,02,12,30,00),timestamp(2021,09,02,12,30,00),timestamp(2021,09,03,12,30,
00),timestamp(2021,09,03,13,45,00),timestamp(2021,09,03,14,00,00),timestamp(2021,09,09,12,30,00),
timestamp(2021,09,14,12,30,00),timestamp(2021,09,16,12,30,00),timestamp(2021,09,16,12,30,00),timestamp
(2021,09,17,14,00,00),timestamp(2021,09,22,14,00,00),timestamp(2021,09,22,18,00,00),timestamp(2021,
09,22,18,30,00),timestamp(2021,09,23,12,30,00),timestamp(2021,09,23,13,45,00),timestamp(2021,09,23,
13,45,00),timestamp(2021,09,24,14,00,00),timestamp(2021,09,27,12,30,00),timestamp(2021,09,28,12,30,
00),timestamp(2021,09,28,14,00,00),timestamp(2021,09,29,14,45,00),timestamp(2021,09,30,12,30,00),
timestamp(2021,10,01,12,30,00),timestamp(2021,10,01,13,45,00),timestamp(2021,10,01,14,00,00),timestamp
(2021,10,01,14,00,00),timestamp(2021,10,05,12,30,00),timestamp(2021,10,05,13,45,00),timestamp(2021,
10,05,14,00,00),timestamp(2021,10,06,12,15,00),timestamp(2021,10,07,12,30,00),timestamp(2021,10,08,
12,30,00),timestamp(2021,10,13,12,30,00),timestamp(2021,10,13,18,00,00),timestamp(2021,10,14,12,30,
00),timestamp(2021,10,15,12,30,00),timestamp(2021,10,15,14,00,00),timestamp(2021,10,21,12,30,00),
timestamp(2021,10,21,14,00,00),timestamp(2021,10,22,13,45,00),timestamp(2021,10,22,13,45,00),timestamp
(2021,10,22,15,00,00),timestamp(2021,10,26,14,00,00),timestamp(2021,10,27,12,30,00),timestamp(2021,
10,27,12,30,00),timestamp(2021,10,28,12,30,00),timestamp(2021,10,28,12,30,00),timestamp(2021,10,29,
12,30,00),timestamp(2021,10,29,14,00,00),timestamp(2021,11,01,13,45,00),timestamp(2021,11,01,14,00,
00),timestamp(2021,11,03,12,15,00),timestamp(2021,11,03,13,45,00),timestamp(2021,11,03,14,00,00),
timestamp(2021,11,03,18,00,00),timestamp(2021,11,03,18,30,00),timestamp(2021,11,04,12,30,00),timestamp
(2021,11,04,12,30,00),timestamp(2021,11,05,12,30,00),timestamp(2021,11,08,15,30,00),timestamp(2021,
11,09,14,00,00),timestamp(2021,11,10,13,30,00),timestamp(2021,11,10,13,30,00),timestamp(2021,11,12,
15,00,00),timestamp(2021,11,16,13,30,00),timestamp(2021,11,18,13,30,00),timestamp(2021,11,22,15,00,
00),timestamp(2021,11,23,14,45,00),timestamp(2021,11,23,14,45,00),timestamp(2021,11,24,13,30,00),
timestamp(2021,11,24,13,30,00),timestamp(2021,11,24,13,30,00),timestamp(2021,11,24,15,00,00),timestamp
(2021,11,24,15,00,00),timestamp(2021,11,24,15,00,00),timestamp(2021,11,24,19,00,00),timestamp(2021,
11,29,20,05,00),timestamp(2021,11,30,15,00,00),timestamp(2021,12,01,13,15,00),timestamp(2021,12,01,
14,45,00),timestamp(2021,12,01,15,00,00),timestamp(2021,12,01,15,00,00),timestamp(2021,12,02,13,30,
00),timestamp(2021,12,03,13,30,00),timestamp(2021,12,03,14,45,00),timestamp(2021,12,03,15,00,00),
timestamp(2021,12,07,13,30,00),timestamp(2021,12,09,13,30,00),timestamp(2021,12,10,13,30,00),timestamp
(2021,12,10,15,00,00),timestamp(2021,12,15,13,30,00),timestamp(2021,12,15,19,00,00),timestamp(2021,
12,15,19,30,00),timestamp(2021,12,16,13,30,00),timestamp(2021,12,16,14,45,00),timestamp(2021,12,16,
14,45,00),timestamp(2021,12,22,15,00,00),timestamp(2021,12,23,13,30,00),timestamp(2021,12,23,13,30,
00),timestamp(2021,12,23,13,30,00),timestamp(2021,12,23,15,00,00),timestamp(2021,12,23,15,00,00),
timestamp(2021,12,29,13,30,00),timestamp(2021,12,30,13,30,00),timestamp(2022,01,03,14,45,00),timestamp
(2022,01,04,15,00,00),timestamp(2022,01,05,13,15,00),timestamp(2022,01,05,14,45,00),timestamp(2022,
01,05,19,00,00),timestamp(2022,01,06,13,30,00),timestamp(2022,01,06,13,30,00),timestamp(2022,01,06,
15,00,00),timestamp(2022,01,07,13,30,00),timestamp(2022,01,11,15,00,00),timestamp(2022,01,12,13,30,
00),timestamp(2022,01,13,13,30,00),timestamp(2022,01,14,13,30,00),timestamp(2022,01,14,15,00,00),
timestamp(2022,01,20,13,30,00),timestamp(2022,01,20,15,00,00),timestamp(2022,01,24,14,45,00),timestamp
(2022,01,24,14,45,00),timestamp(2022,01,26,13,30,00),timestamp(2022,01,26,15,00,00),timestamp(2022,
01,26,19,00,00),timestamp(2022,01,26,19,30,00),timestamp(2022,01,27,13,30,00),timestamp(2022,01,27,
13,30,00),timestamp(2022,01,27,13,30,00),timestamp(2022,01,28,13,30,00),timestamp(2022,01,28,15,00,
00),timestamp(2022,02,01,14,45,00),timestamp(2022,02,01,15,00,00),timestamp(2022,02,02,13,15,00),
timestamp(2022,02,03,13,30,00),timestamp(2022,02,03,14,45,00),timestamp(2022,02,03,15,00,00),timestamp
(2022,02,04,13,30,00),timestamp(2022,02,08,13,30,00),timestamp(2022,02,10,13,30,00),timestamp(2022,
02,10,13,30,00),timestamp(2022,02,11,15,00,00),timestamp(2022,02,16,13,30,00),timestamp(2022,02,16,
19,00,00),timestamp(2022,02,17,13,30,00),timestamp(2022,02,18,15,00,00),timestamp(2022,02,22,14,45,
00),timestamp(2022,02,22,14,45,00),timestamp(2022,02,24,13,30,00),timestamp(2022,02,24,13,30,00),
timestamp(2022,02,24,15,00,00),timestamp(2022,02,25,13,30,00),timestamp(2022,02,25,13,30,00),timestamp
(2022,02,25,15,00,00),timestamp(2022,02,28,13,30,00),timestamp(2022,03,01,14,45,00),timestamp(2022,
03,01,15,00,00),timestamp(2022,03,02,13,15,00),timestamp(2022,03,02,15,00,00),timestamp(2022,03,03,
13,30,00),timestamp(2022,03,03,14,45,00),timestamp(2022,03,03,15,00,00),timestamp(2022,03,03,15,00,
00),timestamp(2022,03,04,13,30,00),timestamp(2022,03,08,13,30,00),timestamp(2022,03,10,13,30,00),
timestamp(2022,03,10,13,30,00),timestamp(2022,03,11,15,00,00),timestamp(2022,03,16,12,30,00),timestamp
(2022,03,16,18,00,00),timestamp(2022,03,16,18,30,00),timestamp(2022,03,17,12,30,00),timestamp(2022,
03,18,14,00,00),timestamp(2022,03,21,16,00,00),timestamp(2022,03,23,12,00,00),timestamp(2022,03,23,
14,00,00),timestamp(2022,03,24,12,30,00),timestamp(2022,03,24,12,30,00),timestamp(2022,03,24,13,45,
00),timestamp(2022,03,24,13,45,00),timestamp(2022,03,25,14,00,00),timestamp(2022,03,28,12,30,00),
timestamp(2022,03,30,12,15,00),timestamp(2022,03,31,12,30,00),timestamp(2022,03,31,12,30,00),timestamp
(2022,04,01,12,30,00),timestamp(2022,04,01,13,45,00),timestamp(2022,04,01,14,00,00),timestamp(2022,
04,05,12,30,00),timestamp(2022,04,05,13,45,00),timestamp(2022,04,05,14,00,00),timestamp(2022,04,06,
18,00,00),timestamp(2022,04,07,12,30,00),timestamp(2022,04,12,12,30,00),timestamp(2022,04,14,12,30,
00),timestamp(2022,04,14,12,30,00),timestamp(2022,04,14,14,00,00),timestamp(2022,04,20,14,00,00),
timestamp(2022,04,21,12,30,00),timestamp(2022,04,21,15,00,00),timestamp(2022,04,21,17,00,00),timestamp
(2022,04,22,13,45,00),timestamp(2022,04,22,13,45,00),timestamp(2022,04,26,12,30,00),timestamp(2022,
04,26,14,00,00),timestamp(2022,04,27,12,30,00),timestamp(2022,04,28,12,30,00),timestamp(2022,04,28,
12,30,00),timestamp(2022,04,29,12,30,00),timestamp(2022,04,29,14,00,00),timestamp(2022,05,02,13,45,
00),timestamp(2022,05,02,14,00,00),timestamp(2022,05,04,12,15,00),timestamp(2022,05,04,12,30,00),
timestamp(2022,05,04,13,45,00),timestamp(2022,05,04,14,00,00),timestamp(2022,05,04,18,00,00),timestamp
(2022,05,04,18,30,00),timestamp(2022,05,05,12,30,00),timestamp(2022,05,06,12,30,00),timestamp(2022,
05,11,12,30,00),timestamp(2022,05,12,12,30,00),timestamp(2022,05,13,14,00,00),timestamp(2022,05,17,
12,30,00),timestamp(2022,05,17,18,00,00),timestamp(2022,05,19,12,30,00),timestamp(2022,05,19,14,00,
00),timestamp(2022,05,24,13,45,00),timestamp(2022,05,24,13,45,00),timestamp(2022,05,24,14,00,00),
timestamp(2022,05,24,16,20,00),timestamp(2022,05,25,12,30,00),timestamp(2022,05,25,18,00,00),timestamp
(2022,05,26,12,30,00),timestamp(2022,05,26,12,30,00),timestamp(2022,05,27,12,30,00),timestamp(2022,
05,27,12,30,00),timestamp(2022,05,27,14,00,00),timestamp(2022,06,01,13,45,00),timestamp(2022,06,01,
14,00,00),timestamp(2022,06,02,12,15,00),timestamp(2022,06,02,12,30,00),timestamp(2022,06,03,12,30,
00),timestamp(2022,06,03,13,45,00),timestamp(2022,06,03,14,00,00),timestamp(2022,06,07,12,30,00),
timestamp(2022,06,09,12,30,00),timestamp(2022,06,10,12,30,00),timestamp(2022,06,10,14,00,00),timestamp
(2022,06,15,12,30,00),timestamp(2022,06,15,18,00,00),timestamp(2022,06,15,18,30,00),timestamp(2022,
06,16,12,30,00),timestamp(2022,06,17,12,45,00),timestamp(2022,06,21,14,00,00),timestamp(2022,06,22,
13,30,00),timestamp(2022,06,23,12,30,00),timestamp(2022,06,23,13,45,00),timestamp(2022,06,23,13,45,
00),timestamp(2022,06,23,14,00,00),timestamp(2022,06,24,14,00,00),timestamp(2022,06,24,14,00,00),
timestamp(2022,06,27,12,30,00),timestamp(2022,06,28,12,30,00),timestamp(2022,06,29,13,00,00),timestamp
(2022,06,30,12,30,00),timestamp(2022,06,30,12,30,00),timestamp(2022,07,01,14,00,00),timestamp(2022,
07,06,14,00,00),timestamp(2022,07,06,18,00,00),timestamp(2022,07,07,12,30,00),timestamp(2022,07,07,
12,30,00),timestamp(2022,07,08,12,30,00),timestamp(2022,07,13,12,30,00),timestamp(2022,07,13,12,30,
00),timestamp(2022,07,14,12,30,00),timestamp(2022,07,15,12,30,00),timestamp(2022,07,15,14,00,00),
timestamp(2022,07,20,14,00,00),timestamp(2022,07,21,12,30,00),timestamp(2022,07,26,14,00,00),timestamp
(2022,07,27,12,30,00),timestamp(2022,07,27,12,30,00),timestamp(2022,07,27,18,00,00),timestamp(2022,
07,27,18,30,00),timestamp(2022,07,28,12,30,00),timestamp(2022,07,28,12,30,00),timestamp(2022,07,29,
12,30,00),timestamp(2022,07,29,14,00,00),timestamp(2022,08,01,14,00,00),timestamp(2022,08,03,14,00,
00),timestamp(2022,08,04,12,30,00),timestamp(2022,08,04,12,30,00),timestamp(2022,08,05,12,30,00),
timestamp(2022,08,10,12,30,00),timestamp(2022,08,10,12,30,00),timestamp(2022,08,11,12,30,00),timestamp
(2022,08,12,14,00,00),timestamp(2022,08,17,12,30,00),timestamp(2022,08,17,18,00,00),timestamp(2022,
08,18,12,30,00),timestamp(2022,08,18,14,00,00),timestamp(2022,08,23,14,00,00),timestamp(2022,08,24,
12,30,00),timestamp(2022,08,25,12,30,00),timestamp(2022,08,25,12,30,00),timestamp(2022,08,26,12,30,
00),timestamp(2022,08,26,12,30,00),timestamp(2022,08,26,14,00,00),timestamp(2022,08,26,14,00,00),
timestamp(2022,08,31,12,15,00),timestamp(2022,09,01,12,30,00),timestamp(2022,09,01,14,00,00),timestamp
(2022,09,02,12,30,00),timestamp(2022,09,06,14,00,00),timestamp(2022,09,07,12,30,00),timestamp(2022,
09,08,12,30,00),timestamp(2022,09,13,12,30,00),timestamp(2022,09,13,12,30,00),timestamp(2022,09,15,
12,30,00),timestamp(2022,09,15,12,30,00),timestamp(2022,09,16,14,00,00),timestamp(2022,09,21,14,00,
00),timestamp(2022,09,21,18,00,00),timestamp(2022,09,21,18,30,00),timestamp(2022,09,22,12,30,00),
timestamp(2022,09,23,18,00,00),timestamp(2022,09,27,12,30,00),timestamp(2022,09,27,14,00,00),timestamp
(2022,09,28,12,30,00),timestamp(2022,09,28,14,15,00),timestamp(2022,09,29,12,30,00),timestamp(2022,
09,30,12,30,00),timestamp(2022,09,30,14,00,00),timestamp(2022,10,03,14,00,00),timestamp(2022,10,05,
12,15,00),timestamp(2022,10,05,12,30,00),timestamp(2022,10,05,14,00,00),timestamp(2022,10,06,12,30,
00),timestamp(2022,10,07,12,30,00),timestamp(2022,10,12,18,00,00),timestamp(2022,10,13,12,30,00),
timestamp(2022,10,13,12,30,00),timestamp(2022,10,13,12,30,00),timestamp(2022,10,14,12,30,00),timestamp
(2022,10,14,14,00,00),timestamp(2022,10,20,12,30,00),timestamp(2022,10,20,14,00,00),timestamp(2022,
10,26,12,30,00),timestamp(2022,10,26,14,00,00),timestamp(2022,10,27,12,30,00),timestamp(2022,10,27,
12,30,00),timestamp(2022,10,27,12,30,00),timestamp(2022,10,28,12,30,00),timestamp(2022,10,28,14,00,
00),timestamp(2022,11,01,14,00,00),timestamp(2022,11,02,12,15,00),timestamp(2022,11,02,18,00,00),
timestamp(2022,11,02,18,30,00),timestamp(2022,11,03,12,30,00),timestamp(2022,11,03,12,30,00),timestamp
(2022,11,03,14,00,00),timestamp(2022,11,04,12,30,00),timestamp(2022,11,10,13,30,00),timestamp(2022,
11,10,13,30,00),timestamp(2022,11,10,13,30,00),timestamp(2022,11,11,15,00,00),timestamp(2022,11,16,
13,30,00),timestamp(2022,11,17,13,30,00),timestamp(2022,11,18,15,00,00),timestamp(2022,11,23,13,30,
00),timestamp(2022,11,23,13,30,00),timestamp(2022,11,23,15,00,00),timestamp(2022,11,23,15,00,00),
timestamp(2022,11,23,19,00,00),timestamp(2022,11,30,13,15,00),timestamp(2022,11,30,13,30,00),timestamp
(2022,11,30,13,30,00),timestamp(2022,11,30,18,30,00),timestamp(2022,12,01,13,30,00),timestamp(2022,
12,01,13,30,00),timestamp(2022,12,01,15,00,00),timestamp(2022,12,02,13,30,00),timestamp(2022,12,05,
15,00,00),timestamp(2022,12,06,13,30,00),timestamp(2022,12,08,13,30,00),timestamp(2022,12,09,15,00,
00),timestamp(2022,12,13,13,30,00),timestamp(2022,12,13,13,30,00),timestamp(2022,12,14,19,00,00),
timestamp(2022,12,14,19,30,00),timestamp(2022,12,15,13,30,00),timestamp(2022,12,15,13,30,00),timestamp
(2022,12,21,15,00,00),timestamp(2022,12,22,13,30,00),timestamp(2022,12,23,13,30,00),timestamp(2022,
12,23,13,30,00),timestamp(2022,12,23,15,00,00),timestamp(2022,12,23,15,00,00),timestamp(2022,12,27,
13,30,00),timestamp(2022,12,29,13,30,00),timestamp(2023,01,04,15,00,00),timestamp(2023,01,04,19,00,
00),timestamp(2023,01,05,13,15,00),timestamp(2023,01,05,13,30,00),timestamp(2023,01,05,13,30,00),
timestamp(2023,01,06,13,30,00),timestamp(2023,01,06,15,00,00),timestamp(2023,01,10,14,00,00),timestamp
(2023,01,12,13,30,00),timestamp(2023,01,12,13,30,00),timestamp(2023,01,12,13,30,00),timestamp(2023,
01,13,15,00,00),timestamp(2023,01,18,13,30,00),timestamp(2023,01,19,13,30,00),timestamp(2023,01,20,
15,00,00),timestamp(2023,01,26,13,30,00),timestamp(2023,01,26,13,30,00),timestamp(2023,01,26,13,30,
00),timestamp(2023,01,26,15,00,00),timestamp(2023,01,27,13,30,00),timestamp(2023,01,27,15,00,00),
timestamp(2023,02,01,13,15,00),timestamp(2023,02,01,15,00,00),timestamp(2023,02,01,19,00,00),timestamp
(2023,02,01,19,30,00),timestamp(2023,02,02,13,30,00),timestamp(2023,02,03,13,30,00),timestamp(2023,
02,03,15,00,00),timestamp(2023,02,07,13,30,00),timestamp(2023,02,07,17,40,00),timestamp(2023,02,09,
13,30,00),timestamp(2023,02,10,15,00,00),timestamp(2023,02,14,13,30,00),timestamp(2023,02,14,13,30,
00),timestamp(2023,02,15,13,30,00),timestamp(2023,02,16,13,30,00),timestamp(2023,02,21,15,00,00),
timestamp(2023,02,22,19,00,00),timestamp(2023,02,23,13,30,00),timestamp(2023,02,24,13,30,00),timestamp
(2023,02,24,15,00,00),timestamp(2023,02,24,15,00,00),timestamp(2023,02,27,13,30,00),timestamp(2023,
02,28,13,30,00),timestamp(2023,03,01,15,00,00),timestamp(2023,03,02,13,30,00),timestamp(2023,03,03,
15,00,00),timestamp(2023,03,07,15,00,00),timestamp(2023,03,08,13,15,00),timestamp(2023,03,08,13,30,
00),timestamp(2023,03,09,13,30,00),timestamp(2023,03,10,13,30,00),timestamp(2023,03,15,12,30,00),
timestamp(2023,03,16,12,30,00),timestamp(2023,03,17,14,00,00),timestamp(2023,03,21,14,00,00),timestamp
(2023,03,22,18,00,00),timestamp(2023,03,22,18,30,00),timestamp(2023,03,23,12,30,00),timestamp(2023,
03,23,14,00,00),timestamp(2023,03,24,12,30,00),timestamp(2023,03,28,12,30,00),timestamp(2023,03,30,
12,30,00),timestamp(2023,03,31,12,30,00),timestamp(2023,03,31,14,00,00),timestamp(2023,04,03,14,00,
00),timestamp(2023,04,05,12,15,00),timestamp(2023,04,05,12,30,00),timestamp(2023,04,05,14,00,00),
timestamp(2023,04,06,12,30,00),timestamp(2023,04,07,12,30,00),timestamp(2023,04,12,12,30,00),timestamp
(2023,04,12,12,30,00),timestamp(2023,04,12,18,00,00),timestamp(2023,04,13,12,30,00),timestamp(2023,
04,14,12,30,00),timestamp(2023,04,14,14,00,00),timestamp(2023,04,20,12,30,00),timestamp(2023,04,20,
14,00,00),timestamp(2023,04,25,14,00,00),timestamp(2023,04,26,12,30,00),timestamp(2023,04,26,12,30,
00),timestamp(2023,04,27,12,30,00),timestamp(2023,04,27,12,30,00),timestamp(2023,04,28,12,30,00),
timestamp(2023,04,28,14,00,00),timestamp(2023,05,01,14,00,00),timestamp(2023,05,03,12,15,00),timestamp
(2023,05,03,14,00,00),timestamp(2023,05,03,18,00,00),timestamp(2023,05,03,18,30,00),timestamp(2023,
05,04,12,30,00),timestamp(2023,05,04,12,30,00),timestamp(2023,05,05,12,30,00),timestamp(2023,05,10,
12,30,00),timestamp(2023,05,10,12,30,00),timestamp(2023,05,11,12,30,00),timestamp(2023,05,12,14,00,
00),timestamp(2023,05,16,12,30,00),timestamp(2023,05,18,12,30,00),timestamp(2023,05,18,14,00,00),
timestamp(2023,05,19,15,00,00),timestamp(2023,05,23,14,00,00),timestamp(2023,05,24,18,00,00),timestamp
(2023,05,25,12,30,00),timestamp(2023,05,26,12,30,00),timestamp(2023,05,26,12,30,00),timestamp(2023,
05,26,12,30,00),timestamp(2023,05,26,14,00,00),timestamp(2023,06,01,12,15,00),timestamp(2023,06,01,
12,30,00),timestamp(2023,06,01,14,00,00),timestamp(2023,06,02,12,30,00),timestamp(2023,06,07,12,30,
00),timestamp(2023,06,08,12,30,00),timestamp(2023,06,13,12,30,00),timestamp(2023,06,13,12,30,00),
timestamp(2023,06,14,18,00,00),timestamp(2023,06,14,18,30,00),timestamp(2023,06,15,12,30,00),timestamp
(2023,06,15,12,30,00),timestamp(2023,06,16,14,00,00),timestamp(2023,06,22,12,30,00),timestamp(2023,
06,22,14,00,00),timestamp(2023,06,27,12,30,00),timestamp(2023,06,27,14,00,00),timestamp(2023,06,28,
12,30,00),timestamp(2023,06,29,12,30,00),timestamp(2023,06,30,12,30,00),timestamp(2023,06,30,14,00,
00),timestamp(2023,07,03,14,00,00),timestamp(2023,07,05,18,00,00),timestamp(2023,07,06,12,15,00),
timestamp(2023,07,06,12,30,00),timestamp(2023,07,06,12,30,00),timestamp(2023,07,07,12,30,00),timestamp
(2023,07,12,12,30,00),timestamp(2023,07,12,12,30,00),timestamp(2023,07,13,12,30,00),timestamp(2023,
07,14,14,00,00),timestamp(2023,07,18,12,30,00),timestamp(2023,07,20,12,30,00),timestamp(2023,07,20,
14,00,00),timestamp(2023,07,26,14,00,00),timestamp(2023,07,26,18,00,00),timestamp(2023,07,26,18,30,
00),timestamp(2023,07,27,12,30,00),timestamp(2023,07,27,12,30,00),timestamp(2023,07,27,12,30,00),
timestamp(2023,07,27,12,30,00),timestamp(2023,07,28,12,30,00),timestamp(2023,07,28,14,00,00),timestamp
(2023,08,01,14,00,00),timestamp(2023,08,02,12,15,00),timestamp(2023,08,03,12,30,00),timestamp(2023,
08,04,12,30,00),timestamp(2023,08,08,12,30,00),timestamp(2023,08,10,12,30,00),timestamp(2023,08,10,
12,30,00),timestamp(2023,08,10,12,30,00),timestamp(2023,08,11,14,00,00),timestamp(2023,08,15,12,30,
00),timestamp(2023,08,16,18,00,00),timestamp(2023,08,17,12,30,00),timestamp(2023,08,22,14,00,00),
timestamp(2023,08,23,14,00,00),timestamp(2023,08,24,12,30,00),timestamp(2023,08,24,12,30,00),timestamp
(2023,08,25,14,00,00),timestamp(2023,08,30,12,15,00),timestamp(2023,08,30,12,30,00),timestamp(2023,
08,31,12,30,00),timestamp(2023,08,31,12,30,00),timestamp(2023,09,01,12,30,00),timestamp(2023,09,01,
14,00,00),timestamp(2023,09,07,12,30,00),timestamp(2023,09,13,12,30,00),timestamp(2023,09,13,12,30,
00),timestamp(2023,09,14,12,30,00),timestamp(2023,09,14,12,30,00),timestamp(2122,12,06,15,30,00))
varEventNames=array.from("MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange","Markit
Services/CompositePMI","BalanceofTrade","JoblessClaims","ISMNon-ManufacturingPMI","NonFarmPayrolls",
"InflationRate","JoblessClaims","FedChair","RetailSales","MichiganConsumerSentiment","TreasurySecretary",
"JoblessClaims","MarkitServices/CompositePMI","MarkitManufacturingPMI","ExistingHomeSales","DurableGoods
Orders","FedInterestRateDecision","FedPressConference","GDP","GoodsTradeBalance","JoblessClaims","New
HomeSales","PersonalIncome/Spending","MichiganConsumerSentiment","MarkitManufacturingPMI","ISMManufacturing
PMI","ADPEmploymentChange","MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","JoblessClaims","Non
FarmPayrolls","BalanceofTrade","InflationRate","FedChair","JoblessClaims","MichiganConsumerSentiment",
"RetailSales","FOMCMinutes","JoblessClaims","MarkitManufacturingPMI","MarkitServices/CompositePMI",
"ExistingHomeSales","FedChair","NewHomeSales","FedChair","DurableGoodsOrders","JoblessClaims","Personal
Income/Spending","GoodsTradeBalance","MichiganConsumerSentiment","MarkitManufacturingPMI","ISMManufacturing
PMI","ADPEmploymentChange","MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","JoblessClaims","Fed
Chair","NonFarmPayrolls","BalanceofTrade","InflationRate","JoblessClaims","MichiganConsumerSentiment",
"RetailSales","FedInterestRateDecision","FedPressConference","JoblessClaims","FedChair","ExistingHome
Sales","NewHomeSales","FedChair","DurableGoodsOrders","MarkitServices/CompositePMI","MarkitManufacturing
PMI","FedChair","JoblessClaims","PersonalIncome/Spending","GoodsTradeBalance","MichiganConsumerSentiment",
"ADPEmploymentChange","JoblessClaims","MarkitManufacturingPMI","ISMManufacturingPMI","NonFarmPayrolls",
"MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","BalanceofTrade","FOMCMinutes","JoblessClaims",
"FedChair","InflationRate","FedChair","JoblessClaims","RetailSales","MichiganConsumerSentiment","Jobless
Claims","ExistingHomeSales","MarkitManufacturingPMI","MarkitServices/CompositePMI","NewHomeSales","Durable
GoodsOrders","GoodsTradeBalance","FedInterestRateDecision","FedPressConference","GDP","JoblessClaims",
"PersonalIncome/Spending","MichiganConsumerSentiment","MarkitManufacturingPMI","ISMManufacturingPMI","Fed
Chair","BalanceofTrade","ADPEmploymentChange","MarkitServices/CompositePMI","ISMNon-ManufacturingPMI",
"JoblessClaims","NonFarmPayrolls","InflationRate","JoblessClaims","RetailSales","MichiganConsumer
Sentiment","FOMCMinutes","JoblessClaims","MarkitServices/CompositePMI","MarkitManufacturingPMI","Existing
HomeSales","NewHomeSales","DurableGoodsOrders","JoblessClaims","GoodsTradeBalance","PersonalIncome/
Spending","MichiganConsumerSentiment","MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange",
"JoblessClaims","MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","FedChair","NonFarmPayrolls",
"BalanceofTrade","InflationRate","JoblessClaims","MichiganConsumerSentiment","RetailSales","FedInterest
RateDecision","FedPressConference","JoblessClaims","ExistingHomeSales","FedChair","MarkitManufacturing
PMI","MarkitServices/CompositePMI","NewHomeSales","JoblessClaims","DurableGoodsOrders","GoodsTrade
Balance","PersonalIncome/Spending","MichiganConsumerSentiment","ADPEmploymentChange","JoblessClaims","Markit
ManufacturingPMI","ISMManufacturingPMI","BalanceofTrade","NonFarmPayrolls","MarkitServices/CompositePMI",
"ISMNon-ManufacturingPMI","FOMCMinutes","JoblessClaims","InflationRate","FedChair","JoblessClaims","Fed
Chair","RetailSales","MichiganConsumerSentiment","JoblessClaims","ExistingHomeSales","MarkitManufacturing
PMI","MarkitServices/CompositePMI","NewHomeSales","DurableGoodsOrders","GoodsTradeBalance","FedInterest
RateDecision","FedPressConference","GDP","JoblessClaims","PersonalIncome/Spending","MichiganConsumer
Sentiment","MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange","MarkitServices/Composite
PMI","ISMNon-ManufacturingPMI","JoblessClaims","BalanceofTrade","NonFarmPayrolls","InflationRate",
"JoblessClaims","MichiganConsumerSentiment","RetailSales","FedChair","FOMCMinutes","JoblessClaims","Markit
ManufacturingPMI","MarkitServices/CompositePMI","ExistingHomeSales","NewHomeSales","DurableGoodsOrders",
"JoblessClaims","PersonalIncome/Spending","GoodsTradeBalance","MichiganConsumerSentiment","FedChair","ADP
EmploymentChange","MarkitManufacturingPMI","ISMManufacturingPMI","BalanceofTrade","JoblessClaims","Non
FarmPayrolls","MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","JoblessClaims","InflationRate",
"RetailSales","JoblessClaims","MichiganConsumerSentiment","ExistingHomeSales","FedInterestRateDecision",
"FedPressConference","JoblessClaims","MarkitManufacturingPMI","MarkitServices/CompositePMI","NewHome
Sales","DurableGoodsOrders","GoodsTradeBalance","FedChair","FedChair","JoblessClaims","PersonalIncome/
Spending","MarkitManufacturingPMI","MichiganConsumerSentiment","ISMManufacturingPMI","BalanceofTrade",
"MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","ADPEmploymentChange","JoblessClaims","NonFarm
Payrolls","InflationRate","FOMCMinutes","JoblessClaims","RetailSales","MichiganConsumerSentiment","Jobless
Claims","ExistingHomeSales","MarkitServices/CompositePMI","MarkitManufacturingPMI","FedChair","NewHome
Sales","DurableGoodsOrders","GoodsTradeBalance","GDP","JoblessClaims","PersonalIncome/Spending","Michigan
ConsumerSentiment","MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange","MarkitServices/
CompositePMI","ISMNon-ManufacturingPMI","FedInterestRateDecision","FedPressConference","JoblessClaims",
"BalanceofTrade","NonFarmPayrolls","FedChair","FedChair","JoblessClaims","InflationRate","Michigan
ConsumerSentiment","RetailSales","JoblessClaims","ExistingHomeSales","MarkitManufacturingPMI","Markit
Services/CompositePMI","JoblessClaims","DurableGoodsOrders","GoodsTradeBalance","MichiganConsumer
Sentiment","NewHomeSales","PersonalIncome/Spending","FOMCMinutes","FedChair","FedChair","ADPEmployment
Change","MarkitManufacturingPMI","FedChair","ISMManufacturingPMI","JoblessClaims","NonFarmPayrolls",
"MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","BalanceofTrade","JoblessClaims","InflationRate",
"MichiganConsumerSentiment","RetailSales","FedInterestRateDecision","FedPressConference","JoblessClaims",
"MarkitManufacturingPMI","MarkitServices/CompositePMI","ExistingHomeSales","DurableGoodsOrders","Personal
Income/Spending","JoblessClaims","NewHomeSales","MichiganConsumerSentiment","GoodsTradeBalance","Jobless
Claims","MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange","MarkitServices/CompositePMI",
"FOMCMinutes","BalanceofTrade","JoblessClaims","ISMNon-ManufacturingPMI","NonFarmPayrolls","FedChair",
"InflationRate","JoblessClaims","RetailSales","MichiganConsumerSentiment","JoblessClaims","ExistingHome
Sales","MarkitServices/CompositePMI","MarkitManufacturingPMI","GoodsTradeBalance","NewHomeSales","Fed
InterestRateDecision","FedPressConference","JoblessClaims","DurableGoodsOrders","GDP","PersonalIncome/
Spending","MichiganConsumerSentiment","MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange",
"JoblessClaims","MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","NonFarmPayrolls","Balanceof
Trade","JoblessClaims","InflationRate","MichiganConsumerSentiment","RetailSales","FOMCMinutes","Jobless
Claims","ExistingHomeSales","MarkitManufacturingPMI","MarkitServices/CompositePMI","GDP","JoblessClaims",
"NewHomeSales","PersonalIncome/Spending","DurableGoodsOrders","MichiganConsumerSentiment","GoodsTrade
Balance","MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange","FedChair","JoblessClaims",
"MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","FedChair","NonFarmPayrolls","BalanceofTrade",
"InflationRate","JoblessClaims","MichiganConsumerSentiment","RetailSales","FedInterestRateDecision","Fed
PressConference","JoblessClaims","ExistingHomeSales","FedChair","FedChair","NewHomeSales","DurableGoods
Orders","JoblessClaims","MarkitServices/CompositePMI","MarkitManufacturingPMI","MichiganConsumerSentiment",
"GoodsTradeBalance","ADPEmploymentChange","JoblessClaims","PersonalIncome/Spending","NonFarmPayrolls",
"MarkitManufacturingPMI","ISMManufacturingPMI","BalanceofTrade","MarkitServices/CompositePMI","ISM
Non-ManufacturingPMI","FOMCMinutes","JoblessClaims","InflationRate","RetailSales","JoblessClaims","Michigan
ConsumerSentiment","ExistingHomeSales","JoblessClaims","FedChair","FedChair","MarkitManufacturingPMI",
"MarkitServices/CompositePMI","DurableGoodsOrders","NewHomeSales","GoodsTradeBalance","GDP","Jobless
Claims","PersonalIncome/Spending","MichiganConsumerSentiment","MarkitManufacturingPMI","ISMManufacturing
PMI","ADPEmploymentChange","BalanceofTrade","MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","Fed
InterestRateDecision","FedPressConference","JoblessClaims","NonFarmPayrolls","InflationRate","Jobless
Claims","MichiganConsumerSentiment","RetailSales","FedChair","JoblessClaims","ExistingHomeSales","Markit
Services/CompositePMI","MarkitManufacturingPMI","NewHomeSales","FedChair","DurableGoodsOrders","FOMC
Minutes","GDP","JoblessClaims","GoodsTradeBalance","PersonalIncome/Spending","MichiganConsumerSentiment",
"MarkitManufacturingPMI","ISMManufacturingPMI","ADPEmploymentChange","JoblessClaims","NonFarmPayrolls",
"MarkitServices/CompositePMI","ISMNon-ManufacturingPMI","BalanceofTrade","JoblessClaims","InflationRate",
"MichiganConsumerSentiment","RetailSales","FedInterestRateDecision","FedPressConference","JoblessClaims",
"FedChair","ExistingHomeSales","FedChair","JoblessClaims","MarkitManufacturingPMI","MarkitServices/
CompositePMI","FedChair","MichiganConsumerSentiment","NewHomeSales","DurableGoodsOrders","GoodsTrade
Balance","FedChair","PersonalIncome/Spending","JoblessClaims","ISMManufacturingPMI","ISMNon-Manufacturing
PMI","FOMCMinutes","BalanceofTrade","JoblessClaims","NonFarmPayrolls","InflationRate","CPI","Jobless
Claims","RetailSales","MichiganConsumerSentiment","ExistingHomeSales","JoblessClaims","NewHomeSales",
"DurableGoodsOrders","GoodsTradeBalance","FedInterestRateDecision","FedPressConference","GDP","Jobless
Claims","PersonalIncome/Spending","MichiganConsumerSentiment","ISMManufacturingPMI","ISMNon-Manufacturing
PMI","BalanceofTrade","JoblessClaims","NonFarmPayrolls","CPI","InflationRate","JoblessClaims","Michigan
ConsumerSentiment","RetailSales","FOMCMinutes","JoblessClaims","ExistingHomeSales","NewHomeSales",
"DurableGoodsOrders","JoblessClaims","GDP","PersonalIncome/Spending","GoodsTradeBalance","MichiganConsumer
Sentiment","FedChair","ADPEmploymentChange","JoblessClaims","ISMManufacturingPMI","NonFarmPayrolls","ISM
Non-ManufacturingPMI","BalanceofTrade","JoblessClaims","InflationRate","CPI","RetailSales","Jobless
Claims","MichiganConsumerSentiment","ExistingHomeSales","FedInterestRateDecision","FedPressConference",
"JoblessClaims","FedChair","DurableGoodsOrders","NewHomeSales","GoodsTradeBalance","FedChair","Jobless
Claims","PersonalIncome/Spending","MichiganConsumerSentiment","ISMManufacturingPMI","ADPEmploymentChange",
"BalanceofTrade","ISMNon-ManufacturingPMI","JoblessClaims","NonFarmPayrolls","FOMCMinutes","Inflation
Rate","JoblessClaims","CPI","RetailSales","MichiganConsumerSentiment","JoblessClaims","ExistingHomeSales",
"GoodsTradeBalance","NewHomeSales","DurableGoodsOrders","JoblessClaims","GDP","PersonalIncome/Spending",
"MichiganConsumerSentiment","ISMManufacturingPMI","ADPEmploymentChange","FedInterestRateDecision","Fed
PressConference","BalanceofTrade","JoblessClaims","ISMNon-ManufacturingPMI","NonFarmPayrolls","CPI",
"InflationRate","JoblessClaims","MichiganConsumerSentiment","RetailSales","JoblessClaims","ExistingHome
Sales","DurableGoodsOrders","JoblessClaims","NewHomeSales","MichiganConsumerSentiment","FOMCMinutes","ADP
EmploymentChange","GDP","GoodsTradeBalance","FedChair","JoblessClaims","PersonalIncome/Spending","ISM
ManufacturingPMI","NonFarmPayrolls","ISMNon-ManufacturingPMI","BalanceofTrade","JoblessClaims","Michigan
ConsumerSentiment","CPI","InflationRate","FedInterestRateDecision","FedPressConference","JoblessClaims",
"RetailSales","ExistingHomeSales","JoblessClaims","PersonalIncome/Spending","DurableGoodsOrders","Michigan
ConsumerSentiment","NewHomeSales","GoodsTradeBalance","JoblessClaims","ISMManufacturingPMI","FOMC
Minutes","ADPEmploymentChange","JoblessClaims","BalanceofTrade","NonFarmPayrolls","ISMNon-Manufacturing
PMI","FedChair","JoblessClaims","InflationRate","CPI","MichiganConsumerSentiment","RetailSales","Jobless
Claims","ExistingHomeSales","JoblessClaims","GoodsTradeBalance","DurableGoodsOrders","NewHomeSales",
"PersonalIncome/Spending","MichiganConsumerSentiment","ADPEmploymentChange","ISMManufacturingPMI","Fed
InterestRateDecision","FedPressConference","JoblessClaims","NonFarmPayrolls","ISMNon-ManufacturingPMI",
"BalanceofTrade","FedChair","JoblessClaims","MichiganConsumerSentiment","CPI","InflationRate","Retail
Sales","JoblessClaims","ExistingHomeSales","FOMCMinutes","JoblessClaims","PersonalIncome/Spending","New
HomeSales","MichiganConsumerSentiment","DurableGoodsOrders","GoodsTradeBalance","ISMManufacturingPMI",
"JoblessClaims","ISMNon-ManufacturingPMI","FedChair","ADPEmploymentChange","BalanceofTrade","Jobless
Claims","NonFarmPayrolls","RetailSales","JoblessClaims","MichiganConsumerSentiment","ExistingHomeSales",
"FedInterestRateDecision","FedPressConference","JoblessClaims","NewHomeSales","DurableGoodsOrders",
"GoodsTradeBalance","JoblessClaims","PersonalIncome/Spending","MichiganConsumerSentiment","ISMManufacturing
PMI","ADPEmploymentChange","BalanceofTrade","ISMNon-ManufacturingPMI","JoblessClaims","NonFarmPayrolls",
"InflationRate","CPI","FOMCMinutes","JoblessClaims","RetailSales","MichiganConsumerSentiment","Jobless
Claims","ExistingHomeSales","NewHomeSales","GoodsTradeBalance","DurableGoodsOrders","JoblessClaims",
"GDP","PersonalIncome/Spending","MichiganConsumerSentiment","ISMManufacturingPMI","ADPEmploymentChange",
"ISMNon-ManufacturingPMI","FedInterestRateDecision","FedPressConference","JoblessClaims","Balanceof
Trade","NonFarmPayrolls","InflationRate","CPI","JoblessClaims","MichiganConsumerSentiment","RetailSales",
"JoblessClaims","ExistingHomeSales","FedChair","NewHomeSales","FOMCMinutes","JoblessClaims","GoodsTrade
Balance","PersonalIncome/Spending","DurableGoodsOrders","MichiganConsumerSentiment","ADPEmploymentChange",
"JoblessClaims","ISMManufacturingPMI","NonFarmPayrolls","BalanceofTrade","JoblessClaims","InflationRate",
"CPI","FedInterestRateDecision","FedPressConference","RetailSales","JoblessClaims","MichiganConsumer
Sentiment","JoblessClaims","ExistingHomeSales","DurableGoodsOrders","NewHomeSales","GoodsTradeBalance",
"JoblessClaims","PersonalIncome/Spending","MichiganConsumerSentiment","ISMManufacturingPMI","FOMCMinutes",
"ADPEmploymentChange","BalanceofTrade","JoblessClaims","NonFarmPayrolls","InflationRate","CPI","Jobless
Claims","MichiganConsumerSentiment","RetailSales","JoblessClaims","ExistingHomeSales","NewHomeSales","Fed
InterestRateDecision","FedPressConference","JoblessClaims","DurableGoodsOrders","GoodsTradeBalance",
"GDP","PersonalIncome/Spending","MichiganConsumerSentiment","ISMManufacturingPMI","ADPEmploymentChange",
"JoblessClaims","NonFarmPayrolls","BalanceofTrade","JoblessClaims","InflationRate","CPI","Michigan
ConsumerSentiment","RetailSales","FOMCMinutes","JoblessClaims","ExistingHomeSales","NewHomeSales",
"DurableGoodsOrders","JoblessClaims","MichiganConsumerSentiment","ADPEmploymentChange","GoodsTrade
Balance","JoblessClaims","PersonalIncome/Spending","NonFarmPayrolls","ISMManufacturingPMI","JoblessClaims",
"InflationRate","CPI","RetailSales","JoblessClaims","FakeTypeForTesting")
//Gettinginputs
fastMA1_switch=input.string(title="Fastmovingaverage(MA)",defval="EMA",options=["SMA","EMA","DEMA","TEMA"])
slowMA1_switch=input.string(title="Slowmovingaverage(MA)",defval="EMA",options=["SMA","EMA","DEMA","TEMA"])
fast_length1=input(title="FastMAlength",defval=50)
slow_length1=input(title="SlowMAlength",defval=200)
counterTrendMAangleMin=input(title="counterTrendMAangleMin--exp.",defval=3)
MAangleDiffMin=input(title="MAangleDiffMin--exp.",defval=3)
showMA=input.bool(title="ShowMA--exp.",defval=false)
displayMA=showMA?display.all:display.none
fast_length=input(title="MACDFastLength",defval=12)
slow_length=input(title="MACDSlowLength",defval=26)
signal_length=input.int(title="MACDSignalSmoothing",minval=1,maxval=50,defval=9)
src=input(title="MACDSource",defval=close)
i_switch=input.string(title="TickHighlight",defval="Movingaverage",options=["Movingaverage","Fixedvalue"])
i_switch2=input.string(title="TickSource",defval="Highestbar",options=["Highestbar","Average","Lastbar"])
signal_lengthup=input.int(title="UpticksAvg.Length",minval=1,maxval=5000,defval=72)
signal_lengthdown=input.int(title="DownticksAvg.Length",minval=1,maxval=5000,defval=72)
signal_lengthMA=input.float(title="TicksAvg.Multiplier",minval=0,maxval=5000,defval=1.39,step=0.01)
sma_source="EMA"
sma_signal="EMA"
//Plotcolors
col_grow_above=#26A69A
col_fall_above=#B2DFDB
col_grow_below=#FFCDD2
col_fall_below=#FF5252
//Calculating
fast_ma=sma_source=="SMA"?ta.sma(src,fast_length):ta.ema(src,fast_length)
slow_ma=sma_source=="SMA"?ta.sma(src,slow_length):ta.ema(src,slow_length)
time_macd=timeframe.period=="1"?"1":timeframe.period=="3"?"1":timeframe.period=="5"?"1":timeframe.period=="15"?
"3":timeframe.period=="30"?"5":timeframe.period=="60"?"15":timeframe.period=="120"?"30":timeframe.period=="240"?
"60":timeframe.period=="D"?"240":timeframe.period=="W"?"D":timeframe.period=="M"?"W":timeframe.period=="12M"?
"M":timeframe.period
macd=fast_ma-slow_ma
macd1=request.security(syminfo.tickerid,time_macd,macd)
signal=sma_signal=="SMA"?ta.sma(macd1,signal_length):ta.ema(macd1,signal_length)
fastMAsignal=(0.0)
fastMA1=switchfastMA1_switch
"SMA"=>fastMAsignal:=ta.sma(close,fast_length1)
"EMA"=>fastMAsignal:=ta.ema(close,fast_length1)
"DEMA"=>
ema1=ta.ema(close,fast_length1)
ema2=ta.ema(ema1,fast_length1)
fastMAsignal:=2*ema1-ema2
"TEMA"=>
ema1=ta.ema(close,fast_length1)
ema2=ta.ema(ema1,fast_length1)
ema3=ta.ema(ema2,fast_length1)
fastMAsignal:=3*(ema1-ema2)+ema3
=>
runtime.error("NomatchingMAtypefound.")
float(na)
plot(fastMAsignal,"fastMA",color=color.orange,linewidth=2,display=displayMA)
slowMAsignal=(0.0)
slowMA1=switchslowMA1_switch
"SMA"=>slowMAsignal:=ta.sma(close,slow_length1)
"EMA"=>slowMAsignal:=ta.ema(close,slow_length1)
"DEMA"=>
ema1=ta.ema(close,slow_length1)
ema2=ta.ema(ema1,slow_length1)
slowMAsignal:=2*ema1-ema2
"TEMA"=>
ema1=ta.ema(close,slow_length1)
ema2=ta.ema(ema1,slow_length1)
ema3=ta.ema(ema2,slow_length1)
slowMAsignal:=3*(ema1-ema2)+ema3
=>
runtime.error("NomatchingMAtypefound.")
float(na)
plot(slowMAsignal,"slowMA",color=color.aqua,linewidth=2,display=displayMA)
varTradeCounter=0
FirstCount=input.int(title="FirsttradeafterEMAcross",minval=1,maxval=1000,defval=1)-1
LastCount=input.int(title="LasttradeafterEMAcross",minval=1,maxval=1000,defval=19)-1
varTradeGroupCounter=0
MaxTradeGroups=input.int(title="MaxNo.oftradegroupsafterEMAcross",minval=1,maxval=100,defval=100)
bull=fastMA1>slowMA1
bear=fastMA1<slowMA1
ReverseDetectedTrend=input.bool(title="ReverseDetectedTrend--experimental(leaveunchecked)",defval=false,
group="orderparameters")
ifReverseDetectedTrend
bullOrig=bull
bearOrig=bear
bull:=bearOrig
bear:=bullOrig
ifbull!=bull[1]//orbear!=bear[1]
TradeCounter:=0
TradeGroupCounter:=0
CountCriteriaToTrade=FirstCount<=TradeCounterandTradeCounter<=LastCount
ifstrategy.opentrades==0andstrategy.opentrades[1]>0
TradeGroupCounter:=TradeGroupCounter+1
MaxTradeGroupsCriteria=TradeGroupCounter<MaxTradeGroups
plot(TradeGroupCounter,"TradeGroupCounter",display=display.data_window)
hist=request.security(syminfo.tickerid,time_macd,macd1-signal)
f()=>[hist[4],hist[3],hist[2],hist[1],hist]
ss=request.security(syminfo.tickerid,time_macd,hist,barmerge.gaps_on,barmerge.lookahead_off)
[ss5,ss4,ss3,ss2,ss1]=request.security(syminfo.tickerid,time_macd,f(),barmerge.gaps_on,barmerge.lookahead_off)
a=array.from(ss5,ss4,ss3,ss2,ss1)
s3=i_switch2=="Highestbar"?(ss>0?array.max(a,0):array.min(a,0)):i_switch2=="Average"?array.avg(a)
:i_switch2=="Lastbar"?ss1:0
saa=timeframe.period=='1'?ss:s3
saa2=timeframe.period=='1'?ss:s3*signal_lengthMA
colorss=(s3>=0?(s3[1]<s3?col_grow_above:col_fall_above):(s3[1]<s3?col_grow_below:col_fall_below))
saadown=saa2
saaup=saa2
saadown:=saa>=0?saa2:saadown[1]
saaup:=saa<0?saa2:saaup[1]
verr=ta.ema(saadown,signal_lengthup)
dowww=ta.ema(saaup,signal_lengthdown)
ss22=plot(verr,title="Avg.CloudUpper1",color=color.new(color.white,100))
ss33=plot(dowww,title="Avg.CloudLower1",color=color.new(color.white,100))
fill(ss22,ss33,color.new(color.white,93),title="Avg.CloudBackground")
fixeduptick=input(title="FixedUptickValue",defval=30)
fixeddowntick=input(title="FixedDowntickValue",defval=-30)
minl=i_switch=="Fixedvalue"?fixeduptick:verr
maxl=i_switch=="Fixedvalue"?fixeddowntick:dowww
plot(minl,title="Avg.CloudUpper2",color=color.new(color.white,81))
plot(maxl,title="Avg.CloudLower2",color=color.new(color.white,81))
colors2=s3<=minlands3>=maxl?#2a2e39:colorss
coro2=s3>0?bull?#2a2e39:colors2:bear?#2a2e39:colors2
plot(saa,title="Histogram",style=plot.style_columns,color=coro2)
actOnFirstN_min=input.int(title="ActonthefirstNsignal(min)",defval=1,minval=1)
actOnFirstN_max=input.int(title="ActonthefirstNsignal(max)",defval=6,minval=1)
minMAdiff=input.float(title="Min.MAdifference(%)",defval=0.82,step=0.01)/100
maxMAdiff=input.float(title="Max.MAdifference(%)",defval=3.1,step=0.1)/100
LimitDiff=input.float(title="LimitPriceDifference(%)(0->marketorder)",minval=0,maxval=10,defval=0.0,
step=0.01,group="orderparameters")/100
Show_TPSL=input.bool(title="ShowTPandSL?(onlyworksifthestrategyisinthemaingraph)",defval=false,
group="orderparameters")
TPSL_linewidth=input.int(title="linewidthoftheTPandLSlines",minval=1,maxval=10,defval=1,group=
"orderparameters")
TP=input.float(title="TakeProfit-frommarketprice(%)",minval=0,maxval=10,defval=0.9,step=0.05,
group="orderparameters")/100
col_TP=input.color(color.green,"TPcolor",group="orderparameters")
SL=input.float(title="StopLoss-frommarketprice(%)",minval=0,maxval=10,defval=1.3,step=0.05,group
="orderparameters")/100
col_SL=input.color(color.red,"SLcolor",group="orderparameters")
TrStop=input.bool(title="UseTrailingStop?--experimental",defval=false,group="orderparameters")
TrTrigger=input.float(title="TrailingStop-triggerprice(%)",minval=0,maxval=10,defval=0.65,step=0.
05,group="orderparameters")/100
TrOffset=input.float(title="TrailingStop-stopdistance(%)",minval=0,maxval=10,defval=0.1,step=0.01,
group="orderparameters")/100
maxCountertrendDiff=input.float(title="Max.countertrenddiff.(%)--experimental",minval=0,maxval=100,
defval=100,step=0.05,group="orderparameters")/100
//BigthankstoÂ©FloppyDisqueforsharingtheTimeFilterpart,thatgotreusedinthefollowingsection:
//TimeFilter{
//Beginning/Enddatefilter{
g_time="TimeFilter"
timeZone=input.string("GMT-4","TimeZone",group=g_time,
tooltip="GMTandUTCisthesamething\nMatchthissettingtobottomrighttime",
options=["GMT-10","GMT-9","GMT-8","GMT-7","GMT-6","GMT-5","GMT-4","GMT-3","GMT+0","GMT+1","GMT+2","GMT
+3","GMT+4","GMT+5","GMT+6","GMT+7","GMT+8","GMT+9","GMT+10","GMT+10:30","GMT+11","GMT+12","GMT+13",
"GMT+13:45"])
startTimeIn=input.time(timestamp("01Jan2000"),"StartDateFilter",group=g_time,
tooltip="Changingtimezoneatbottomrightofchartwillchangestarttime\nSetcharttimezonetoyourprefered
timefirst,thenchangeindicatorsetting")
endTimeIn=input.time(timestamp("01Jan2099"),"EndDateFilter",group=g_time)
startTimeYear=year(startTimeIn,timeZone)
startTimeMonth=month(startTimeIn,timeZone)
startTimeDay=dayofmonth(startTimeIn,timeZone)
endTimeYear=year(endTimeIn,timeZone)
endTimeMonth=month(endTimeIn,timeZone)
endTimeDay=dayofmonth(endTimeIn,timeZone)
startTime=timestamp(timeZone,startTimeYear,startTimeMonth,startTimeDay)
endTime=timestamp(timeZone,endTimeYear,endTimeMonth,endTimeDay)
inDate=time>=startTimeandtime<=endTime
//}
//WeekdaysFilter{
useWeek=input.bool(true,"UseWeekdaysFilter?",group=g_time,
tooltip="Disabletoallowallweekdays,Enabletochoosecertaindays")
useMon=input.bool(true,"Monâ€‡",inline="Days",group=g_time)
useTue=input.bool(true,"Tueâ€‡",inline="Days",group=g_time)
useWed=input.bool(true,"Wedâ€‡",inline="Days",group=g_time)
useThu=input.bool(true,"Thuâ€‡",inline="Days",group=g_time)
useFri=input.bool(true,"Friâ€‡",inline="Days",group=g_time)
useSat=input.bool(false,"Satâ€‡",inline="Days",group=g_time)
useSun=input.bool(true,"Sun",inline="Days",group=g_time)
inWeek=ifuseWeekanduseMonanddayofweek(time,timeZone)==dayofweek.monday
true
elseifuseWeekanduseTueanddayofweek(time,timeZone)==dayofweek.tuesday
true
elseifuseWeekanduseWedanddayofweek(time,timeZone)==dayofweek.wednesday
true
elseifuseWeekanduseThuanddayofweek(time,timeZone)==dayofweek.thursday
true
elseifuseWeekanduseFrianddayofweek(time,timeZone)==dayofweek.friday
true
elseifuseWeekanduseSatanddayofweek(time,timeZone)==dayofweek.saturday
true
elseifuseWeekanduseSunanddayofweek(time,timeZone)==dayofweek.sunday
true
elseifnot(useWeek)
true
//}
//SessionFilter{
isInSess(_sess)=>time(timeframe.period,_sess,timeZone)
useSess=input.bool(true,"UseSessionFilter?",group=g_time)
timeSess1=input.session("0130-1145","TimeSession",group=g_time)
inSess1=isInSess(timeSess1)
useSess2=input.bool(true,"Use2NDSessionFilter?",group=g_time)
timeSess2=input.session("1300-0000","TimeSession2",group=g_time)
inSess2=isInSess(timeSess2)
useSessFri=input.bool(true,"Use'Friday'Filter?",group=g_time)
timeSessFri=input.session("0000-2030","FridaySession",group=g_time)
inSessFri=isInSess(timeSessFri)
useSessFriSatClose=input.bool(false,"CloseallattheendoftheFriday/SaturdaySession?",group=g_time)
timeSessFriClose=input.session("0000-0000","FridaySessionClose(0000-0000:inactive)",group=g_time)
timeSessSatClose=input.session("0000-0000","SaturdaySessionClose(0000-0000:inactive)",group=g_time)
inSessFriClose=isInSess(timeSessFriClose)
inSessSatClose=isInSess(timeSessSatClose)
useSessSun=input.bool(true,"Use'Sunday'Filter?",group=g_time)
timeSessSun=input.session("2145-0000","SundaySession",group=g_time)
inSessSun=isInSess(timeSessSun)
inSess=ifuseSessandinSess1
true
elseifuseSess2andinSess2
true
elseifnot(useSess)
true
ifdayofweek(time,timeZone)==dayofweek.fridayanduseSessFri
inSess:=inSessandinSessFri
ifdayofweek(time,timeZone)==dayofweek.sundayanduseSessSun
inSess:=inSessandinSessSun
//}
//PrepareTimeFilter---USEVARIABLE-->"inTime"<--ASTIMEFILTERINANYCODE{
inTime=inDateandinWeekandinSess
//bgcolor(inTime?color.new(color.blue,90):na,title="TimeFilter")
//}
//}
//Newseffectavoidance
EventTypeAvoidance_00=input.bool(defval=false,title="ISMManufacturingPMI",group="Newseffectavoidance")
EventTypeAvoidance_01=input.bool(defval=true,title="ADPEmploymentChange",group="Newseffectavoidance")
EventTypeAvoidance_02=input.bool(defval=false,title="MarkitServices/CompositePMI",group="Newseffectavoidance")
EventTypeAvoidance_03=input.bool(defval=false,title="MarkitManufacturingPMI",group="Newseffectavoidance")
EventTypeAvoidance_04=input.bool(defval=false,title="BalanceofTrade",group="Newseffectavoidance")
EventTypeAvoidance_05=input.bool(defval=true,title="JoblessClaims",group="Newseffectavoidance")
EventTypeAvoidance_06=input.bool(defval=false,title="ISMNon-ManufacturingPMI",group="Newseffectavoidance")
EventTypeAvoidance_07=input.bool(defval=true,title="NonFarmPayrolls",group="Newseffectavoidance")
EventTypeAvoidance_08=input.bool(defval=true,title="CPI",group="Newseffectavoidance")
EventTypeAvoidance_09=input.bool(defval=true,title="InflationRate",group="Newseffectavoidance")
EventTypeAvoidance_10=input.bool(defval=true,title="FedChair",group="Newseffectavoidance")
EventTypeAvoidance_11=input.bool(defval=false,title="RetailSales",group="Newseffectavoidance")
EventTypeAvoidance_12=input.bool(defval=false,title="MichiganConsumerSentiment",group="Newseffectavoidance")
EventTypeAvoidance_13=input.bool(defval=true,title="TreasurySecretary",group="Newseffectavoidance")
EventTypeAvoidance_14=input.bool(defval=false,title="ExistingHomeSales",group="Newseffectavoidance")
EventTypeAvoidance_15=input.bool(defval=false,title="DurableGoodsOrders",group="Newseffectavoidance")
EventTypeAvoidance_16=input.bool(defval=true,title="FedInterestRateDecision",group="Newseffectavoidance")
EventTypeAvoidance_17=input.bool(defval=true,title="GDP",group="Newseffectavoidance")
EventTypeAvoidance_18=input.bool(defval=false,title="GoodsTradeBalance",group="Newseffectavoidance")
EventTypeAvoidance_19=input.bool(defval=false,title="NewHomeSales",group="Newseffectavoidance")
EventTypeAvoidance_20=input.bool(defval=false,title="PersonalIncome/Spending",group="Newseffectavoidance")
EventTypeAvoidance_21=input.bool(defval=true,title="FOMCMinutes",group="Newseffectavoidance")
EventTypeAvoidance_22=input.bool(defval=true,title="FedPressConference",group="Newseffectavoidance")
array.set(EventTypeAvoidance,0,EventTypeAvoidance_00)
array.set(EventTypeAvoidance,1,EventTypeAvoidance_01)
array.set(EventTypeAvoidance,2,EventTypeAvoidance_02)
array.set(EventTypeAvoidance,3,EventTypeAvoidance_03)
array.set(EventTypeAvoidance,4,EventTypeAvoidance_04)
array.set(EventTypeAvoidance,5,EventTypeAvoidance_05)
array.set(EventTypeAvoidance,6,EventTypeAvoidance_06)
array.set(EventTypeAvoidance,7,EventTypeAvoidance_07)
array.set(EventTypeAvoidance,8,EventTypeAvoidance_08)
array.set(EventTypeAvoidance,9,EventTypeAvoidance_09)
array.set(EventTypeAvoidance,10,EventTypeAvoidance_10)
array.set(EventTypeAvoidance,11,EventTypeAvoidance_11)
array.set(EventTypeAvoidance,12,EventTypeAvoidance_12)
array.set(EventTypeAvoidance,13,EventTypeAvoidance_13)
array.set(EventTypeAvoidance,14,EventTypeAvoidance_14)
array.set(EventTypeAvoidance,15,EventTypeAvoidance_15)
array.set(EventTypeAvoidance,16,EventTypeAvoidance_16)
array.set(EventTypeAvoidance,17,EventTypeAvoidance_17)
array.set(EventTypeAvoidance,18,EventTypeAvoidance_18)
array.set(EventTypeAvoidance,19,EventTypeAvoidance_19)
array.set(EventTypeAvoidance,20,EventTypeAvoidance_20)
array.set(EventTypeAvoidance,21,EventTypeAvoidance_21)
array.set(EventTypeAvoidance,22,EventTypeAvoidance_22)
avoidance_TimeBeforeNews=1000*60*input.float(title="suspendtradingXminutesbeforethenewsevent",defval=80,
step=10,group="Newseffectavoidance")
avoidance_TimeAfterNews=1000*60*input.float(title="continuetradingXminutesafterthenewsevent",defval=120,
step=10,group="Newseffectavoidance")
currentTime=time(timeframe.period)
lastEvent=array.binary_search_leftmost(EventTimestamps,currentTime)
nextEvent=lastEvent+1
lastEventName=array.get(EventNames,lastEvent)
lastEventTypeIndex=array.indexof(EventNameTypes,lastEventName)
nextEventName=array.get(EventNames,nextEvent)
nextEventTypeIndex=array.indexof(EventNameTypes,nextEventName)
avoidTrading=((array.get(EventTimestamps,lastEvent)+avoidance_TimeAfterNews)>currentTimeandarray.get
(EventTypeAvoidance,lastEventTypeIndex))or((array.get(EventTimestamps,nextEvent)-avoidance_TimeBeforeNews)<
currentTimeandarray.get(EventTypeAvoidance,nextEventTypeIndex))
//testoutwhatiftradesareclosedbeforenews.
//ifavoidTrading
//strategy.close_all()
inTime:=inTimeand(notavoidTrading)
bgcolor(inTime?color.new(color.blue,90):na,title="TimeFilter")
//automatedtradingspecificpart
autoTradeMode=input.string(title="Automatedtradingservice",defval="None",options=["None","aleeert","TTA"],group
="AutomatedTrading")
//aleeertspecificpart
aleeert_key=input.string(title="aleeertuserkey",defval="",group="aleeert")
aleeert_slot_id=input.string(title="aleeertslot_id",defval="",group="aleeert")
aleeert_tradingPair_override=""
aleeert_tradingPair_override:=input.string(title="aleeerttradingpairoverride(originalifempty)",defval="",
group="aleeert")
aleeert_tradingPair=aleeert_tradingPair_override==""?syminfo.ticker:aleeert_tradingPair_override
aleeert_leverage=input.int(title="aleeertleverage",defval=50,minval=1,maxval=1000,group="aleeert")
aleeert_tradeSize_percent=input.float(title="aleeerttradesize(%)",defval=2.0,step=0.1,minval=0.0,
maxval=100.0,group="aleeert")
aleeert_buy_order_precondition="ifshort:"+aleeert_tradingPair+",close,100%,-"
+","+aleeert_slot_id+","+aleeert_key
aleeert_buy_order_entry=aleeert_tradingPair+"(x"+str.tostring((aleeert_leverage),'#')+")"+",cancel-buy,"+
str.tostring((aleeert_tradeSize_percent),'#.##')+"%,market"
+","+aleeert_slot_id+","+aleeert_key

aleeert_buy_order_exit=aleeert_tradingPair+"(x"+str.tostring((aleeert_leverage),'#')+")"+",tpsl,-,"
+str.tostring((close),'#.##')+"+"+str.tostring((TP*100),'#.##')+"%(100%)"+"|"+str.tostring((close),
'#.##')+"-"+str.tostring((SL*100),'#.##')+"%(100%)"
+","+aleeert_slot_id+","+aleeert_key
//trail_price=close*(1+TrTrigger),trail_offset=(close*TrOffset)/syminfo.mintick,
aleeert_buy_order_trstop=aleeert_tradingPair+",sell,100%,"
+str.tostring((close*(1+TrTrigger)),'#.##')+":"+str.tostring((TrOffset*100),'#.###')+"%(TS)"
+","+aleeert_slot_id+","+aleeert_key

aleeert_buy_order_command=aleeert_buy_order_precondition+";"+aleeert_buy_order_entry+";"+
aleeert_buy_order_exit
aleeert_buy_order_w_trstop_command=aleeert_buy_order_entry+";"+aleeert_buy_order_exit+";"+
aleeert_buy_order_trstop
aleeert_sell_order_precondition="iflong:"+aleeert_tradingPair+",close,100%,-"
+","+aleeert_slot_id+","+aleeert_key
aleeert_sell_order_entry=aleeert_tradingPair+"(x"+str.tostring((aleeert_leverage),'#')+")"+",cancel-sell,"
+str.tostring((aleeert_tradeSize_percent),'#.##')+"%,market"
+","+aleeert_slot_id+","+aleeert_key

aleeert_sell_order_exit=aleeert_tradingPair+"(x"+str.tostring((aleeert_leverage),'#')+")"+",tpsl,-,"
+str.tostring((close),'#.##')+"-"+str.tostring((TP*100),'#.##')+"%(100%)"+"|"+str.tostring((close),
'#.##')+"+"+str.tostring((SL*100),'#.##')+"%(100%)"
+","+aleeert_slot_id+","+aleeert_key

aleeert_sell_order_trstop=aleeert_tradingPair+",buy,100%,"
+str.tostring((close*(1-TrTrigger)),'#.##')+":"+str.tostring((TrOffset*100),'#.###')+"%(TS)"
+","+aleeert_slot_id+","+aleeert_key
aleeert_sell_order_command=aleeert_sell_order_precondition+";"+aleeert_sell_order_entry+";"+
aleeert_sell_order_exit
aleeert_sell_order_w_trstop_command=aleeert_sell_order_entry+";"+aleeert_sell_order_exit+";"+
aleeert_sell_order_trstop
aleeert_positon_close_command=aleeert_tradingPair+",close,100%,-,"+aleeert_slot_id+","+aleeert_key
aleeert_positon_close_w_trstop_command=aleeert_tradingPair+",cancel-close,100%,-,"+aleeert_slot_id+","+
aleeert_key
//TTAspecficpart
TTA_tradingPair_override=""
TTA_tradingPair_override:=input.string(title="TTAtradingpairoverride(originalifempty)",defval="",group=
"TradingViewtoAnywhere(TTA)")
TTA_tradingPair=TTA_tradingPair_override==""?syminfo.ticker:TTA_tradingPair_override
TTA_tradeSize_percent=input.float(title="TTAtradesize(%)",defval=2.0,step=0.1,minval=0.0,maxval=100.
0,group="TradingViewtoAnywhere(TTA)")
//tradecommandexamples
//buyBTCUSDq=1%sl=19000.00tp=20000.00
//buyBTCUSDsl=19040.00tp=20040.00modify
TTA_buy_order_entry="buy"+TTA_tradingPair+"q="+str.tostring((TTA_tradeSize_percent),'#.##')+"%"
+"sl="+str.tostring((close*(1-SL)),'#.##')+"tp="+str.tostring((close*(1+TP)),'#.##')
TTA_buy_order_exit="buy"+TTA_tradingPair
+"sl="+str.tostring((close*(1-SL)),'#.##')+"tp="+str.tostring((close*(1+TP)),'#.##')+"modify"

TTA_sell_order_entry="sell"+TTA_tradingPair+"q="+str.tostring((TTA_tradeSize_percent),'#.##')+"%"
+"sl="+str.tostring((close*(1+SL)),'#.##')+"tp="+str.tostring((close*(1-TP)),'#.##')
TTA_sell_order_exit="sell"+TTA_tradingPair
+"sl="+str.tostring((close*(1+SL)),'#.##')+"tp="+str.tostring((close*(1-TP)),'#.##')+"modify"
TTA_buy_order_command=TTA_buy_order_entry+"\n"+TTA_buy_order_exit
TTA_sell_order_command=TTA_sell_order_entry+"\n"+TTA_sell_order_exit
//generalpart
buy_order_command=""
sell_order_command=""
positon_close_command=""
switchautoTradeMode
"aleeert"=>
ifTrStop
buy_order_command:=aleeert_buy_order_w_trstop_command
sell_order_command:=aleeert_sell_order_w_trstop_command
positon_close_command:=aleeert_positon_close_w_trstop_command
else
buy_order_command:=aleeert_buy_order_command
sell_order_command:=aleeert_sell_order_command
positon_close_command:=aleeert_positon_close_command
"TTA"=>
buy_order_command:=TTA_buy_order_command
sell_order_command:=TTA_sell_order_command
"None"=>
buy_order_command:=""
sell_order_command:=""
=>
buy_order_command:=""
sell_order_command:=""
runtime.error("Notrademode")
float(na)
varNthSignal=0
actOnCoro2=actOnFirstN_min<=NthSignal+1andNthSignal+1<=actOnFirstN_max
uniquePostfix=""//+"_"+str.tostring(time)
enterShort="entershort"+uniquePostfix
exitShort="exitshort"+uniquePostfix
enterLong="enterlong"+uniquePostfix
exitLong="exitlong"+uniquePostfix
varminBuyPrice=-1.0
varmaxSellPrice=-1.0
varmaxPyramiding=strategy.opentrades
ifstrategy.position_size==0
minBuyPrice:=-1.0
maxSellPrice:=-1.0

nextBuyAllowed=true
ifminBuyPrice!=-1
nextBuyAllowed:=minBuyPrice<=close

nextSellAllowed=true
ifmaxSellPrice!=-1
nextSellAllowed:=maxSellPrice>=close
varactualTP=0.0
varactualSL=0.0
var_MA_ratio=0.0
if#2a2e39!=coro2andMaxTradeGroupsCriteria
NthSignal:=NthSignal+1
//TradeCounter:=TradeCounter+1
//gettheMAratio
ifbull
_MA_ratio:=math.abs(fastMA1/slowMA1-1)
else
_MA_ratio:=math.abs(slowMA1/fastMA1-1)
ifbullandCountCriteriaToTradeandminMAdiff<_MA_ratioand_MA_ratio<maxMAdiffandactOnCoro2
ifnextBuyAllowedandinTimeandCountCriteriaToTrade
LimitPrice=close*(1-LimitDiff)
ifLimitDiff!=0
strategy.entry(enterLong,strategy.long,limit=LimitPrice,alert_message=buy_order_command)
ifLimitDiff==0
strategy.entry(enterLong,strategy.long,alert_message=buy_order_command)
ifTrStop
actualTP:=close*(1+TP)
actualSL:=close*(1-SL)
strategy.exit(exitLong,enterLong,limit=actualTP,stop=actualSL,
trail_price=close*(1+TrTrigger),trail_offset=(close*TrOffset)/syminfo.mintick,
alert_message="",alert_profit=positon_close_command,alert_loss=positon_close_command)
else
actualTP:=close*(1+TP)
actualSL:=close*(1-SL)
strategy.exit(exitLong,enterLong,limit=actualTP,stop=actualSL,alert_message="",alert_profit
=
positon_close_command,alert_loss=positon_close_command)
maxSellPrice:=-1.0
ifminBuyPrice==-1.0or(minBuyPrice/(1-maxCountertrendDiff))<=close
minBuyPrice:=close*(1-maxCountertrendDiff)
TradeCounter:=TradeCounter+1
ifbearandminMAdiff<_MA_ratioand_MA_ratio<maxMAdiffandactOnCoro2
ifnextSellAllowedandinTimeandCountCriteriaToTrade
LimitPrice=close*(1+LimitDiff)
ifLimitDiff!=0
strategy.entry(enterShort,strategy.short,limit=LimitPrice,alert_message=sell_order_command)
ifLimitDiff==0
strategy.entry(enterShort,strategy.short,alert_message=sell_order_command)
ifTrStop
actualTP:=close*(1-TP)
actualSL:=close*(1+SL)
strategy.exit(exitShort,enterShort,limit=actualTP,stop=actualSL,
trail_price=close*(1-TrTrigger),trail_offset=(close*TrOffset)/syminfo.mintick,
alert_message="",alert_profit=positon_close_command,alert_loss=positon_close_command)
else
actualTP:=close*(1-TP)
actualSL:=close*(1+SL)
strategy.exit(exitShort,enterShort,limit=actualTP,stop=actualSL,alert_message="",
alert_profit=
positon_close_command,alert_loss=positon_close_command)
minBuyPrice:=-1.0
ifmaxSellPrice==-1.0or(maxSellPrice/(1+maxCountertrendDiff))<=close
maxSellPrice:=close*(1+maxCountertrendDiff)
TradeCounter:=TradeCounter+1
else
NthSignal:=0
TPSL_visible=Show_TPSLand(strategy.opentrades!=0or(strategy.opentrades==0andstrategy.opentrades[1]!=0))
plot((TPSL_visible?actualTP:na),"TP",col_TP,TPSL_linewidth,style=plot.style_linebr)
plot((TPSL_visible?actualSL:na),"SL",col_SL,TPSL_linewidth,style=plot.style_linebr)
plot(strategy.opentrades,"OpenTrades",display=display.data_window)
MA_ratio=(1-(fastMAsignal/slowMAsignal))*100
plot(MA_ratio,"MAratio",display=display.data_window)
ifuseSessFriSatClose
and
(
((dayofweek(time,timeZone)==dayofweek.friday)and(inSessFriClose[1]andnotinSessFriClose))
or((dayofweek(time,timeZone)==dayofweek.saturday)and(inSessSatClose[1]andnotinSessSatClose))
)

//runonce,attheendofthesession,onFridays
strategy.cancel_all()
strategy.close_all(alert_message=positon_close_command)
//alertcondition(#2a2e39!=coro2,title='MACDTickAlert',message='JoelonCrypto-MACDTickAlert')
Expand (580 lines)
