Script Name: Accurate BUY & SELL 5 mins TF by RR
Author: RohitVR
Description: Always trade using 5 mins Time frame of chart.
For Buy entry always buy 1 point above the candle closing price & SL would be previous candle low or 30 points.
For Sell Entry Always Sell 1 point below the candle opening price & SL would be previous candle high or 30 points.
Do not take trades using 3 mins Time frame, as there is lot of noise. It works best with 5...
PineScript code:

Pine Script™ strategy
Accurate BUY & SELL 5 mins TF by RR
//@version=4
strategy("Accurate  BUY  &  SELL  5  mins  TF  by  RR",  overlay=true,  initial_capital=1000,  default_qty_type=strategy.percent_of_equity,  default_qty_value=15)
price  =  plot(close,  title="Close  Line",  color=color.blue,  display=display.none)
////////////////////////////////////////////////////////////////////////////////
//TREND  INDICATORS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
//Trend  EMA
tttradetrend  =  "Only  place  BUY  or  SELL  orders  with  the  direction  of  the  Trend  EMA."
tradetrendoption  =  input(false,  title="Tade  with  Trend",  tooltip=tttradetrend)
len111  =  input(defval=200,  minval=0,  maxval=2000,  title="Trend  EMA  Length")
src111  =  close
out111  =  ema(src111,  len111)
ma111    =  plot(out111,  title="EMA  200",  linewidth=2,  color=color.blue,  offset=0)
mabuy    =  out111  >  out111[1]
masell  =  out111  <  out111[1]
//5  EMAs////////////////////////////////////////////////////////////////////////
len1  =  9
src1  =  close
out1  =  ema(src1,  len1)
ema1color  =  (out1  >  out1[1]  ?  #00bcd4  :  #e91e63)
ema1  =  plot(out1,  title="EMA  9",  linewidth=3,  color=color.new(ema1color,  100),  offset=0,  display=display.none)
fill(price,  ema1,  title="EMA  9  Fill",  color=color.new(ema1color,  100),  editable=true)
len2  =  21
src2  =  close
out2  =  ema(src2,  len2)
ema2color  =  (out2  >  out2[1]  ?  #00bcd4  :  #e91e63)
ema2  =  plot(out2,  title="EMA  21",  linewidth=3,  color=color.new(ema2color,  100),  offset=0,  display=display.none)
fill(price,  ema2,  title="EMA  21  Fill",  color=color.new(ema2color,  100),  editable=true)
len3  =  55
src3  =  close
out3  =  ema(src3,  len3)
ema3color  =  (out3  >  out3[1]  ?  #00bcd4  :  #e91e63)
ema3  =  plot(out3,  title="EMA  55",  linewidth=3,  color=color.new(ema3color,  100),  offset=0,  display=display.none)
fill(price,  ema3,  title="EMA  55  Fill",  color=color.new(ema3color,  100),  editable=true)
len4  =  100
src4  =  close
out4  =  ema(src4,  len4)
ema4color  =  (out4  >  out4[1]  ?  #00bcd4  :  #e91e63)
ema4  =  plot(out4,  title="EMA  100",  linewidth=3,  color=color.new(ema4color,  100),  offset=0,  display=display.none)
fill(price,  ema4,  title="EMA  100  Fill",  color=color.new(ema4color,  100),  editable=true)
len5  =  200
src5  =  close
out5  =  ema(src5,  len5)
ema5color  =  (out5  >  out5[1]  ?  #00bcd4  :  #e91e63)
ema5  =  plot(out5,  title="EMA  200",  linewidth=3,  color=color.new(ema5color,  100),  offset=0,  display=display.none)
fill(price,  ema5,  title="EMA  200  Fill",  color=color.new(ema5color,  100),  editable=true)
//Supertrend////////////////////////////////////////////////////////////////////
atrPeriod  =  10
factor  =  3
[supertrend,  direction]  =  supertrend(factor,  atrPeriod)
bodyMiddle  =  plot((open  +  close)  /  2,  display=display.none,  title="Body  Middle  Line")
uptrend  =  direction  <  0  and  direction[1]  >  0[1]  ?  supertrend  :  na
downtrend  =  direction  >  0  and  direction[1]  <  0[1]  ?  supertrend  :  na
//fill(bodyMiddle,  upTrend,  color.new(color.green,  100),  fillgaps=false)
//fill(bodyMiddle,  downTrend,  color.new(color.red,  100),  fillgaps=false)
//bullishsupertrend  =  supertrend  <  close  and  supertrend[1]  >  close
//plotshape(uptrend,  style=shape.labelup,  color=color.green,  location=location.belowbar,  size=size.large)
//HMA///////////////////////////////////////////////////////////////////////////
len6  =  100
src6  =  close
hma  =  wma(2*wma(src6,  len6/2)-wma(src6,  len6),  floor(sqrt(len6)))
hmacolor  =  close  >  hma  ?  #008000:  #FF0000
plot(hma,  title="HMA  Line",  color=color.new(hmacolor,  25),  linewidth=3)
//Parabolic  SAR/////////////////////////////////////////////////////////////////
start  =  0.02
increment  =  0.01
maximum  =  0.2
psar  =  sar(start,  increment,  maximum)
//plot(psar,  "ParabolicSAR",  style=plot.style_circles,  color=#ffffff)
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//MOMENTUM  INCIDATORS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
//RSI  Divergence////////////////////////////////////////////////////////////////
len11  =  14
src11  =  close
lbR11  =  2
lbL11  =  6
rangeUpper11  =  60
rangeLower11  =  5
plotBull11  =  true
plotHiddenBull11  =  false
plotBear11  =  true
plotHiddenBear11  =  false
bearColor11  =  color.red
bullColor11  =  color.green
hiddenBullColor11  =  color.new(color.green,  80)
hiddenBearColor11  =  color.new(color.red,  80)
textColor11  =  color.white
noneColor11  =  color.new(color.white,  100)
osc11  =  rsi(src11,  len11)
//plot(osc11,  title="RSI",  linewidth=2,  color=#2962FF)
//hline(50,  title="Middle  Line",  color=#787B86,  linestyle=hline.style_dotted)
//obLevel11  =  hline(70,  title="Overbought",  color=#787B86,  linestyle=hline.style_dotted)
//osLevel11  =  hline(30,  title="Oversold",  color=#787B86,  linestyle=hline.style_dotted)
//fill(obLevel11,  osLevel11,  title="Background",  color=color.rgb(33,  150,  243,  90))
plFound11  =  na(pivotlow(osc11,  lbL11,  lbR11))  ?  false  :  true
phFound11  =  na(pivothigh(osc11,  lbL11,  lbR11))  ?  false  :  true
_inRange11(cond)  =>
        bars11  =  barssince(cond  ==  true)
        rangeLower11  <=  bars11  and  bars11  <=  rangeUpper11
//Regular  Bullish  Divergence
//Osc:  Higher  Low
oscHL11  =  osc11[lbR11]  >  valuewhen(plFound11,  osc11[lbR11],  1)  and  _inRange11(plFound11[1])
//Price:  Lower  Low
priceLL11  =  low[lbR11]  <  valuewhen(plFound11,  low[lbR11],  1)
bullCond11  =  plotBull11  and  priceLL11  and  oscHL11  and  plFound11
//plot(plFound11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Regular  Bullish",  linewidth=2,  color=(bullCond11  ?  bullColor11  :  noneColor11))
//plotshape(bullCond11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Regular  Bullish  Label",  text="  Bull  ",  style=shape.labelup,  location=location.absolute,  color=bullColor11,  textcolor=textColor11)
//Hidden  Bullish  Divergence
//Osc:  Lower  Low
oscLL11  =  osc11[lbR11]  <  valuewhen(plFound11,  osc11[lbR11],  1)  and  _inRange11(plFound11[1])
//Price:  Higher  Low
priceHL11  =  low[lbR11]  >  valuewhen(plFound11,  low[lbR11],  1)
hiddenBullCond11  =  plotHiddenBull11  and  priceHL11  and  oscLL11  and  plFound11
//plot(plFound11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Hidden  Bullish",  linewidth=2,  color=(hiddenBullCond11  ?  hiddenBullColor11  :  noneColor11))
//plotshape(hiddenBullCond11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Hidden  Bullish  Label",  text="  H  Bull  ",  style=shape.labelup,  location=location.absolute,  color=bullColor11,  textcolor=textColor11)

//Regular  Bearish  Divergence
//Osc:  Lower  High
oscLH11  =  osc11[lbR11]  <  valuewhen(phFound11,  osc11[lbR11],  1)  and  _inRange11(phFound11[1])
//Price:  Higher  High
priceHH11  =  high[lbR11]  >  valuewhen(phFound11,  high[lbR11],  1)
bearCond11  =  plotBear11  and  priceHH11  and  oscLH11  and  phFound11
//plot(phFound11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Regular  Bearish",  linewidth=2,  color=(bearCond11  ?  bearColor11  :  noneColor11))
//plotshape(bearCond11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Regular  Bearish  Label",  text="  Bear  ",  style=shape.labeldown,  location=location.absolute,  color=bearColor11,  textcolor=textColor11)

//Hidden  Bearish  Divergence
//Osc:  Higher  High
oscHH11  =  osc11[lbR11]  >  valuewhen(phFound11,  osc11[lbR11],  1)  and  _inRange11(phFound11[1])
//  Price:  Lower  High
priceLH11  =  high[lbR11]  <  valuewhen(phFound11,  high[lbR11],  1)
hiddenBearCond11  =  plotHiddenBear11  and  priceLH11  and  oscHH11  and  phFound11
//plot(phFound11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Hidden  Bearish",  linewidth=2,  color=(hiddenBearCond11  ?  hiddenBearColor11  :  noneColor11))
//plotshape(hiddenBearCond11  ?  osc11[lbR11]  :  na,  offset=-lbR11,  title="Hidden  Bearish  Label",  text="  H  Bear  ",  style=shape.labeldown,  location=location.absolute,  color=bearColor11,  textcolor=textColor11)
//MACD  Divergence///////////////////////////////////////////////////////////////
fast_length12  =  12
slow_length12  =  26
src12  =  close
signal_length12  =  9
sma_source12  =  "EMA"
sma_signal12  =  "EMA"
//Plot  colors
col_macd12  =  #2962FF
col_signal12  =  #FF6D00
col_grow_above12  =  #26A69A
col_fall_above12  =  #B2DFDB
col_grow_below12  =  #FFCDD2
col_fall_below12  =  #FF5252
//Calculating
fast_ma12  =  sma_source12  ==  "SMA"  ?  sma(src12,  fast_length12)  :  ema(src12,  fast_length12)
slow_ma12  =  sma_source12  ==  "SMA"  ?  sma(src12,  slow_length12)  :  ema(src12,  slow_length12)
macd  =  fast_ma12  -  slow_ma12
signal  =  sma_signal12  ==  "SMA"  ?  sma(macd,  signal_length12)  :  ema(macd,  signal_length12)
hist  =  macd  -  signal
//plot(hist,  title="Histogram",  style=plot.style_columns,  color=(hist>=0  ?  (hist[1]  <  hist  ?  col_grow_above12  :  col_fall_above12)  :  (hist[1]  <  hist  ?  col_grow_below12  :  col_fall_below12)))
//plot(macd,  title="MACD",  color=col_macd12)
//plot(signal,  title="Signal",  color=col_signal12)
donttouchzero12  =  true
lbR12  =  2
lbL12  =  6
rangeUpper12  =  60
rangeLower12  =  5
plotBull12  =  true
plotHiddenBull12  =  false
plotBear12  =  true
plotHiddenBear12  =  false
bearColor12  =  color.red
bullColor12  =  color.green
hiddenBullColor12  =  color.new(color.green,  80)
hiddenBearColor12  =  color.new(color.red,  80)
textColor12  =  color.white
noneColor12  =  color.new(color.white,  100)
osc12  =  macd
plFound12  =  na(pivotlow(osc12,  lbL12,  lbR12))  ?  false  :  true
phFound12  =  na(pivothigh(osc12,  lbL12,  lbR12))  ?  false  :  true
_inRange12(cond)  =>
        bars12  =  barssince(cond  ==  true)
        rangeLower12  <=  bars12  and  bars12  <=  rangeUpper12

//Regular  Bullish  Divergence
//Osc:  Higher  Low
oscHL12  =  osc12[lbR12]  >  valuewhen(plFound12,  osc12[lbR12],  1)  and  _inRange12(plFound12[1])  and    osc12[lbR12]  <  0
//  Price:  Lower  Low
priceLL12  =  low[lbR12]  <  valuewhen(plFound12,  low[lbR12],  1)
priceHHZero12  =    highest(osc12,  lbL12+lbR12+5)
//plot(priceHHZero,title="priceHHZero",color=color.green)
blowzero12  =  donttouchzero12  ?  priceHHZero12  <  0  :  true
bullCond12  =  plotBull12  and  priceLL12  and  oscHL12  and  plFound12  and  blowzero12
//plot(plFound12  ?  osc12[lbR12]  :  na,  offset=-lbR12,  title="Regular  Bullish",  linewidth=2,  color=(bullCond12  ?  bullColor12  :  noneColor12))
//plotshape(bullCond12  ?  osc12[lbR12]  :  na,  offset=-lbR12,  title="Regular  Bullish  Label",  text="  Bull  ",  style=shape.labelup,  location=location.absolute,  color=bullColor12,  textcolor=textColor12)

//Hidden  Bullish  Divergence
//Osc:  Lower  Low
oscLL12  =  osc12[lbR12]  <  valuewhen(plFound12,  osc12[lbR12],  1)  and  _inRange12(plFound12[1])
//Price:  Higher  Low
priceHL12  =  low[lbR12]  >  valuewhen(plFound12,  low[lbR12],  1)
hiddenBullCond12  =  plotHiddenBull12  and  priceHL12  and  oscLL12  and  plFound12
//plot(plFound12  ?  osc12[lbR12]  :  na,  offset=-lbR12,  title="Hidden  Bullish",  linewidth=2,  color=(hiddenBullCond12  ?  hiddenBullColor12  :  noneColor12))
//plotshape(hiddenBullCond12  ?  osc12[lbR12]  :  na,  offset=-lbR12,  title="Hidden  Bullish  Label",  text="  H  Bull  ",  style=shape.labelup,  location=location.absolute,  color=bullColor12,  textcolor=textColor12)

//Regular  Bearish  Divergence
//Osc:  Lower  High
oscLH12  =  osc12[lbR12]  <  valuewhen(phFound12,  osc12[lbR12],  1)  and  _inRange12(phFound12[1])    and  osc12[lbR12]  >  0
priceLLZero12  =    lowest(osc12,  lbL12+lbR12+5)
//plot(priceLLZero,title="priceLLZero",  color=color.red)
bearzero12  =  donttouchzero12  ?  priceLLZero12  >  0  :  true
//Price:  Higher  High
priceHH12  =  high[lbR12]  >  valuewhen(phFound12,  high[lbR12],  1)
bearCond12  =  plotBear12  and  priceHH12  and  oscLH12  and  phFound12  and  bearzero12
//plot(phFound12  ?  osc12[lbR12]  :  na,  offset=-lbR12,  title="Regular  Bearish",  linewidth=2,  color=(bearCond12  ?  bearColor12:noneColor12))
//plotshape(bearCond12?osc12[lbR12]:na,offset=-lbR12,title="RegularBearishLabel",text="Bear",style=shape.labeldown,location=location.absolute,color=bearColor12,textcolor=textColor12)

//HiddenBearishDivergence
//Osc:HigherHigh
oscHH12=osc12[lbR12]>valuewhen(phFound12,osc12[lbR12],1)and_inRange12(phFound12[1])
//Price:LowerHigh
priceLH12=high[lbR12]<valuewhen(phFound12,high[lbR12],1)
hiddenBearCond12=plotHiddenBear12andpriceLH12andoscHH12andphFound12
//plot(phFound12?osc12[lbR12]:na,offset=-lbR12,title="HiddenBearish",linewidth=2,color=(hiddenBearCond12?hiddenBearColor12:noneColor12))
//plotshape(hiddenBearCond12?osc12[lbR12]:na,offset=-lbR12,title="HiddenBearishLabel",text="HBear",style=shape.labeldown,location=location.absolute,color=bearColor12,textcolor=textColor12)


//WaveTrendDivergence/////////////////////////////////////////////////////////
n1=9
n2=12
ap=hlc3
esa=ema(ap,n1)
d1=ema(abs(ap-esa),n1)
ci=(ap-esa)/(0.015*d1)
tci=ema(ci,n2)
hline=0
wt1=tci
wt2=sma(wt1,4)
//plot(hline,color=color.gray)
//plot(wt1,color=color.white)
//plot(wt2,color=color.blue)
//Divergence
lbR13=2
lbL13=6
rangeUpper13=60
rangeLower13=5
plotBull13=true
plotHiddenBull13=false
plotBear13=true
plotHiddenBear13=false
bearColor13=color.red
bullColor13=color.green
hiddenBullColor13=color.green
hiddenBearColor13=color.red
textColor13=color.white
noneColor13=color.new(color.white,100)
k13=wt1
d13=wt2
osc13=k13
plFound13=na(pivotlow(osc13,lbL13,lbR13))?false:true
phFound13=na(pivothigh(osc13,lbL13,lbR13))?false:true
_inRange13(cond)=>
bars13=barssince(cond==true)
rangeLower13<=bars13andbars13<=rangeUpper13
//RegularBullish
//Osc:HigherLow
oscHL13=osc13[lbR13]>valuewhen(plFound13,osc13[lbR13],1)and_inRange13(plFound13[1])
//Price:LowerLow
priceLL13=low[lbR13]<valuewhen(plFound13,low[lbR13],1)
bullCond13=plotBull13andpriceLL13andoscHL13andplFound13
//plot(plFound13?osc13[lbR13]:na,offset=-lbR13,title="RegularBullish",linewidth=2,color=(bullCond13?bullColor13:noneColor13))
//plotshape(bullCond13?osc13[lbR13]:na,offset=-lbR13,title="RegularBullishLabel",text="Bull",style=shape.labelup,location=location.absolute,color=bullColor13,textcolor=textColor13)
//HiddenBullish
//Osc:LowerLow
oscLL13=osc13[lbR13]<valuewhen(plFound13,osc13[lbR13],1)and_inRange13(plFound13[1])
//Price:HigherLow
priceHL13=low[lbR13]>valuewhen(plFound13,low[lbR13],1)
hiddenBullCond13=plotHiddenBull13andpriceHL13andoscLL13andplFound13
//plot(plFound13?osc13[lbR13]:na,offset=-lbR13,title="HiddenBullish",linewidth=2,color=(hiddenBullCond13?hiddenBullColor13:noneColor13))
//plotshape(hiddenBullCond13?osc13[lbR13]:na,offset=-lbR13,title="HiddenBullishLabel",text="HBull",style=shape.labelup,location=location.absolute,color=bullColor13,textcolor=textColor13)

//RegularBearish
//Osc:LowerHigh
oscLH13=osc13[lbR13]<valuewhen(phFound13,osc13[lbR13],1)and_inRange13(phFound13[1])
//Price:HigherHigh
priceHH13=high[lbR13]>valuewhen(phFound13,high[lbR13],1)
bearCond13=plotBear13andpriceHH13andoscLH13andphFound13
//plot(phFound13?osc13[lbR13]:na,offset=-lbR13,title="RegularBearish",linewidth=2,color=(bearCond13?bearColor13:noneColor13))
//plotshape(bearCond13?osc13[lbR13]:na,offset=-lbR13,title="RegularBearishLabel",text="Bear",style=shape.labeldown,location=location.absolute,color=bearColor13,textcolor=textColor13)
//HiddenBearish
//Osc:HigherHigh
oscHH13=osc13[lbR13]>valuewhen(phFound13,osc13[lbR13],1)and_inRange13(phFound13[1])
//Price:LowerHigh
priceLH13=high[lbR13]<valuewhen(phFound13,high[lbR13],1)
hiddenBearCond13=plotHiddenBear13andpriceLH13andoscHH13andphFound13
//plot(phFound13?osc13[lbR13]:na,offset=-lbR13,title="HiddenBearish",linewidth=2,color=(hiddenBearCond13?hiddenBearColor13:noneColor13))
//plotshape(hiddenBearCond13?osc13[lbR13]:na,offset=-lbR13,title="HiddenBearishLabel",text="HBear",style=shape.labeldown,location=location.absolute,color=bearColor13,textcolor=textColor13)
//StochasticDivergence/////////////////////////////////////////////////////////
periodK14=14
smoothK14=3
periodD14=3
k14=sma(stoch(close,high,low,periodK14),smoothK14)
d14=sma(k14,periodD14)
//plot(k14,title="%K",color=#2962FF)
//plot(d14,title="%D",color=#FF6D00)
//h0=hline(80,"UpperBand",color=#787B86)
//h1=hline(20,"LowerBand",color=#787B86)
//fill(h0,h1,color=color.rgb(33,150,243,90),title="Background")
//Divergence
lbR14=2
lbL14=6
rangeUpper14=60
rangeLower14=5
plotBull14=true
plotHiddenBull14=false
plotBear14=true
plotHiddenBear14=false
bearColor14=color.red
bullColor14=color.green
hiddenBullColor14=color.green
hiddenBearColor14=color.red
textColor14=color.white
noneColor14=color.new(color.white,100)
osc14=k14
plFound14=na(pivotlow(osc14,lbL14,lbR14))?false:true
phFound14=na(pivothigh(osc14,lbL14,lbR14))?false:true
_inRange14(cond)=>
bars14=barssince(cond==true)
rangeLower14<=bars14andbars14<=rangeUpper14
//RegularBullish
//Osc:HigherLow
oscHL14=osc14[lbR14]>valuewhen(plFound14,osc14[lbR14],1)and_inRange14(plFound14[1])
//Price:LowerLow
priceLL14=low[lbR14]<valuewhen(plFound14,low[lbR14],1)
bullCond14=plotBull14andpriceLL14andoscHL14andplFound14
//plot(plFound14?osc14[lbR14]:na,offset=-lbR14,title="RegularBullish",linewidth=2,color=(bullCond14?bullColor14:noneColor14))
//plotshape(bullCond14?osc14[lbR14]:na,offset=-lbR14,title="RegularBullishLabel",text="Bull",style=shape.labelup,location=location.absolute,color=bullColor14,textcolor=textColor14)
//HiddenBullish
//Osc:LowerLow
oscLL14=osc14[lbR14]<valuewhen(plFound14,osc14[lbR14],1)and_inRange14(plFound14[1])
//Price:HigherLow
priceHL14=low[lbR14]>valuewhen(plFound14,low[lbR14],1)
hiddenBullCond14=plotHiddenBull14andpriceHL14andoscLL14andplFound14
//plot(plFound14?osc14[lbR14]:na,offset=-lbR14,title="HiddenBullish",linewidth=2,color=(hiddenBullCond14?hiddenBullColor14:noneColor14))
//plotshape(hiddenBullCond14?osc14[lbR14]:na,offset=-lbR14,title="HiddenBullishLabel",text="HBull",style=shape.labelup,location=location.absolute,color=bullColor14,textcolor=textColor14)
//RegularBearish
//Osc:LowerHigh
oscLH14=osc14[lbR14]<valuewhen(phFound14,osc14[lbR14],1)and_inRange14(phFound14[1])
//Price:HigherHigh
priceHH14=high[lbR14]>valuewhen(phFound14,high[lbR14],1)
bearCond14=plotBear14andpriceHH14andoscLH14andphFound14
//plot(phFound14?osc14[lbR14]:na,offset=-lbR14,title="RegularBearish",linewidth=2,color=(bearCond14?bearColor14:noneColor14))
//plotshape(bearCond14?osc14[lbR14]:na,offset=-lbR14,title="RegularBearishLabel",text="Bear",style=shape.labeldown,location=location.absolute,color=bearColor14,textcolor=textColor14)

//HiddenBearish
//Osc:HigherHigh
oscHH14=osc14[lbR14]>valuewhen(phFound14,osc14[lbR14],1)and_inRange14(phFound14[1])
//Price:LowerHigh
priceLH14=high[lbR14]<valuewhen(phFound14,high[lbR14],1)
hiddenBearCond14=plotHiddenBear14andpriceLH14andoscHH14andphFound14
//plot(phFound14?osc14[lbR14]:na,offset=-lbR14,title="HiddenBearish",linewidth=2,color=(hiddenBearCond14?hiddenBearColor14:noneColor14))
//plotshape(hiddenBearCond14?osc14[lbR14]:na,offset=-lbR14,title="HiddenBearishLabel",text="HBear",style=shape.labeldown,location=location.absolute,color=bearColor14,textcolor=textColor14)
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//VOLATILITYINDICATORS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
//BollingerBands///////////////////////////////////////////////////////////////
length1=20
src7=close
mult1=2.0
basis=sma(src7,length1)
dev=mult1*stdev(src7,length1)
upper=basis+dev
lower=basis-dev
offset=0
//plot(basis,"Basis",color=#FF6D00,offset=offset)
//p1=plot(upper,"Upper",color=#2962FF,offset=0)
//p2=plot(lower,"Lower",color=#2962FF,offset=0)
//fill(p1,p2,title="Background",color=color.rgb(33,150,243,95))
//AverageTrueRange/////////////////////////////////////////////////
length2=1
mult2=1.85
showLabels=true
useClose=false
highlightState=false
atr=mult2*atr(length2)
longStop=(useClose?highest(close,length2):highest(length2))-atr
longStopPrev=nz(longStop[1],longStop)
longStop:=close[1]>longStopPrev?max(longStop,longStopPrev):longStop
shortStop=(useClose?lowest(close,length2):lowest(length2))+atr
shortStopPrev=nz(shortStop[1],shortStop)
shortStop:=close[1]<shortStopPrev?min(shortStop,shortStopPrev):shortStop
varintdir=1
dir:=close>shortStopPrev?1:close<longStopPrev?-1:dir
varcolorlongColor=color.white
varcolorshortColor=color.white
buySignal=dir==1anddir[1]==-1
//plotshape(buySignalandshowLabels?longStop:na,title="GoldBuy",text="Buy",location=location.belowbar,style=shape.labelup,size=size.tiny,color=longColor,textcolor=color.new(color.white,0))
sellSignal=dir==-1anddir[1]==1
//plotshape(sellSignalandshowLabels?shortStop:na,title="GoldSell",text="Sell",location=location.abovebar,style=shape.labeldown,size=size.tiny,color=shortColor,textcolor=color.new(color.white,0))
//RelativeVolatilityIndexDivergence//////////////////////////////////////////
length15=12
src15=close
len15=14
stddev15=stdev(src15,length15)
upper15=ema(change(src15)<=0?0:stddev15,len15)
lower15=ema(change(src15)>0?0:stddev15,len15)
rvi=upper15/(upper15+lower15)*100
//h0=hline(80,"UpperBand",color=#787B86)
//h1=hline(20,"LowerBand",color=#787B86)
//fill(h0,h1,color=color.rgb(126,87,194,90),title="Background")
//plot(rvi15,title="RVI",color=#7E57C2,offset=offset)
//Divergence
lbR15=2
lbL15=6
rangeUpper15=60
rangeLower15=5
plotBull15=true
plotHiddenBull15=false
plotBear15=true
plotHiddenBear15=false
bearColor15=color.red
bullColor15=color.green
hiddenBullColor15=color.green
hiddenBearColor15=color.red
textColor15=color.white
noneColor15=color.new(color.white,100)
d15=rvi
osc15=d15
plFound15=na(pivotlow(osc15,lbL15,lbR15))?false:true
phFound15=na(pivothigh(osc15,lbL15,lbR15))?false:true
_inRange15(cond)=>
bars15=barssince(cond==true)
rangeLower15<=bars15andbars15<=rangeUpper15
//RegularBullish
//Osc:HigherLow
oscHL15=osc15[lbR15]>valuewhen(plFound15,osc15[lbR15],1)and_inRange15(plFound15[1])
//Price:LowerLow
priceLL15=low[lbR15]<valuewhen(plFound15,low[lbR15],1)
bullCond15=plotBull15andpriceLL15andoscHL15andplFound15
//plot(plFound15?osc15[lbR15]:na,offset=-lbR15,title="RegularBullish",linewidth=2,color=(bullCond15?bullColor15:noneColor15))
//plotshape(bullCond15?osc15[lbR15]:na,offset=-lbR15,title="RegularBullishLabel",text="Bull",style=shape.labelup,location=location.absolute,color=bullColor15,textcolor=textColor15)
//HiddenBullish
//Osc:LowerLow
oscLL15=osc15[lbR15]<valuewhen(plFound15,osc15[lbR15],1)and_inRange15(plFound15[1])
//Price:HigherLow
priceHL15=low[lbR15]>valuewhen(plFound15,low[lbR15],1)
hiddenBullCond15=plotHiddenBull15andpriceHL15andoscLL15andplFound15
//plot(plFound15?osc15[lbR15]:na,offset=-lbR15,title="HiddenBullish",linewidth=2,color=(hiddenBullCond15?hiddenBullColor15:noneColor15))
//plotshape(hiddenBullCond15?osc15[lbR15]:na,offset=-lbR15,title="HiddenBullishLabel",text="HBull",style=shape.labelup,location=location.absolute,color=bullColor15,textcolor=textColor15)

//RegularBearish
//Osc:LowerHigh
oscLH15=osc15[lbR15]<valuewhen(phFound15,osc15[lbR15],1)and_inRange15(phFound15[1])
//Price:HigherHigh
priceHH15=high[lbR15]>valuewhen(phFound15,high[lbR15],1)
bearCond15=plotBear15andpriceHH15andoscLH15andphFound15
//plot(phFound15?osc15[lbR15]:na,offset=-lbR15,title="RegularBearish",linewidth=2,color=(bearCond15?bearColor15:noneColor15))
//plotshape(bearCond15?osc15[lbR15]:na,offset=-lbR15,title="RegularBearishLabel",text="Bear",style=shape.labeldown,location=location.absolute,color=bearColor15,textcolor=textColor15)
//HiddenBearish
//Osc:HigherHigh
oscHH15=osc15[lbR15]>valuewhen(phFound15,osc15[lbR15],1)and_inRange15(phFound15[1])
//Price:LowerHigh
priceLH15=high[lbR15]<valuewhen(phFound15,high[lbR15],1)
hiddenBearCond15=plotHiddenBear15andpriceLH15andoscHH15andphFound15
//plot(phFound15?osc15[lbR15]:na,offset=-lbR15,title="HiddenBearish",linewidth=2,color=(hiddenBearCond15?hiddenBearColor15:noneColor15))
//plotshape(hiddenBearCond15?osc15[lbR15]:na,offset=-lbR15,title="HiddenBearishLabel",text="HBear",style=shape.labeldown,location=location.absolute,color=bearColor15,textcolor=textColor15)
//SupportandResistance////////////////////////////////////////////////////////
left16=200
right16=20
quick_right16=5
src16="Close"
pivot_high16=iff(src16=="Close",pivothigh(close,left16,right16),pivothigh(high,left16,right16))
pivot_lows16=iff(src16=="Close",pivotlow(close,left16,right16),pivotlow(low,left16,right16))
quick_pivot_high16=iff(src16=="Close",pivothigh(close,left16,quick_right16),pivothigh(high,left16,quick_right16))
quick_pivot_lows16=iff(src16=="Close",pivotlow(close,left16,quick_right16),pivotlow(low,left16,quick_right16))
level1=iff(src16=="Close",valuewhen(quick_pivot_high16,close[quick_right16],0),valuewhen(quick_pivot_high16,high[quick_right16],0))
level2=iff(src16=="Close",valuewhen(quick_pivot_lows16,close[quick_right16],0),valuewhen(quick_pivot_lows16,low[quick_right16],0))
level3=iff(src16=="Close",valuewhen(pivot_high16,close[right16],0),valuewhen(pivot_high16,high[right16],0))
level4=iff(src16=="Close",valuewhen(pivot_lows16,close[right16],0),valuewhen(pivot_lows16,low[right16],0))
level5=iff(src16=="Close",valuewhen(pivot_high16,close[right16],1),valuewhen(pivot_high16,high[right16],1))
level6=iff(src16=="Close",valuewhen(pivot_lows16,close[right16],1),valuewhen(pivot_lows16,low[right16],1))
level7=iff(src16=="Close",valuewhen(pivot_high16,close[right16],2),valuewhen(pivot_high16,high[right16],2))
level8=iff(src16=="Close",valuewhen(pivot_lows16,close[right16],2),valuewhen(pivot_lows16,low[right16],2))
level1_col=close>=level1?color.green:color.red
level2_col=close>=level2?color.green:color.red
level3_col=close>=level3?color.green:color.red
level4_col=close>=level4?color.green:color.red
level5_col=close>=level5?color.green:color.red
level6_col=close>=level6?color.green:color.red
level7_col=close>=level7?color.green:color.red
level8_col=close>=level8?color.green:color.red
length17=9
src17=close
hma17=wma(2*wma(src17,length17/2)-wma(src17,length17),floor(sqrt(length17)))
buy1=hma17>level1andhma17[1]<level1[1]andclose>close[2]
buy2=hma17>level2andhma17[1]<level2[1]andclose>close[2]
buy3=hma17>level3andhma17[1]<level3[1]andclose>close[2]
buy4=hma17>level4andhma17[1]<level4[1]andclose>close[2]
buy5=hma17>level5andhma17[1]<level5[1]andclose>close[2]
buy6=hma17>level6andhma17[1]<level6[1]andclose>close[2]
buy7=hma17>level7andhma17[1]<level7[1]andclose>close[2]
buy8=hma17>level8andhma17[1]<level8[1]andclose>close[2]
sell1=hma17<level1andhma17[1]>level1[1]andclose<close[2]
sell2=hma17<level2andhma17[1]>level2[1]andclose<close[2]
sell3=hma17<level3andhma17[1]>level3[1]andclose<close[2]
sell4=hma17<level4andhma17[1]>level4[1]andclose<close[2]
sell5=hma17<level5andhma17[1]>level5[1]andclose<close[2]
sell6=hma17<level6andhma17[1]>level6[1]andclose<close[2]
sell7=hma17<level7andhma17[1]>level7[1]andclose<close[2]
sell8=hma17<level8andhma17[1]>level8[1]andclose<close[2]
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//VOLUMEINDICATORS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
//OBVDivergence////////////////////////////////////////////////////////////////
len18=20
src18=close
lbR18=2
lbL18=6
rangeUpper18=60
rangeLower18=5
plotBull18=true
plotHiddenBull18=false
plotBear18=true
plotHiddenBear18=false
bearColor18=color.red
bullColor18=color.green
hiddenBullColor18=color.green
hiddenBearColor18=color.new(color.red,80)
textColor18=color.white
noneColor18=color.new(color.white,100)
csrc=change(src18)
obv1(src18)=>cum(change(src18)>0?volume:csrc<0?-volume:0*volume)
os=obv1(src18)
obv_osc=(os-ema(os,len18))
obc_color=obv_osc>0?color.green:color.red
//plot(obv_osc,color=obc_color,style=plot.style_line,title="OBV-Points",linewidth=2)
//plot(obv_osc,color=color.silver,transp=70,title="OBV",style=plot.style_area)
//hline(0)
plFound18=na(pivotlow(obv_osc,lbL18,lbR18))?false:true
phFound18=na(pivothigh(obv_osc,lbL18,lbR18))?false:true
_inRange(cond)=>
bars=barssince(cond==true)
rangeLower18<=barsandbars<=rangeUpper18
//RegularBullish
//Osc:HigherLow
oscHL18=obv_osc[lbR18]>valuewhen(plFound18,obv_osc[lbR18],1)and_inRange(plFound18[1])
//Price:LowerLow
priceLL18=low[lbR18]<valuewhen(plFound18,low[lbR18],1)
bullCond18=plotBull18andpriceLL18andoscHL18andplFound18
//plot(plFound18?obv_osc[lbR18]:na,offset=-lbR18,title="RegularBullish",linewidth=2,color=(bullCond18?bullColor18:noneColor18))
//plotshape(bullCond18?obv_osc[lbR18]:na,offset=-lbR18,title="RegularBullishLabel",text="Bull",style=shape.labelup,location=location.absolute,color=bullColor18,textcolor=textColor18)
//HiddenBullish
//Osc:LowerLow
oscLL18=obv_osc[lbR18]<valuewhen(plFound18,obv_osc[lbR18],1)and_inRange(plFound18[1])
//Price:HigherLow
priceHL18=low[lbR18]>valuewhen(plFound18,low[lbR18],1)
hiddenBullCond18=plotHiddenBull18andpriceHL18andoscLL18andplFound18
//plot(plFound18?obv_osc[lbR18]:na,offset=-lbR18,title="HiddenBullish",linewidth=2,color=(hiddenBullCond18?hiddenBullColor18:noneColor18))
//plotshape(hiddenBullCond18?obv_osc[lbR18]:na,offset=-lbR18,title="HiddenBullishLabel",text="HBull",style=shape.labelup,location=location.absolute,color=bullColor18,textcolor=textColor18)
//RegularBearish
//Osc:LowerHigh
oscLH18=obv_osc[lbR18]<valuewhen(phFound18,obv_osc[lbR18],1)and_inRange(phFound18[1])
//Price:HigherHigh
priceHH18=high[lbR18]>valuewhen(phFound18,high[lbR18],1)
bearCond18=plotBear18andpriceHH18andoscLH18andphFound18
//plot(phFound18?obv_osc[lbR18]:na,offset=-lbR18,title="RegularBearish",linewidth=2,color=(bearCond18?bearColor18:noneColor18))
//plotshape(bearCond18?obv_osc[lbR18]:na,offset=-lbR18,title="RegularBearishLabel",text="Bear",style=shape.labeldown,location=location.absolute,color=bearColor18,textcolor=textColor18)
//HiddenBearish
//Osc:HigherHigh
oscHH18=obv_osc[lbR18]>valuewhen(phFound18,obv_osc[lbR18],1)and_inRange(phFound18[1])
//Price:LowerHigh
priceLH18=high[lbR18]<valuewhen(phFound18,high[lbR18],1)
hiddenBearCond18=plotHiddenBear18andpriceLH18andoscHH18andphFound18
//plot(phFound18?obv_osc[lbR18]:na,offset=-lbR18,title="HiddenBearish",linewidth=2,color=(hiddenBearCond18?hiddenBearColor18:noneColor18))
//plotshape(hiddenBearCond18?obv_osc[lbR18]:na,offset=-lbR18,title="HiddenBearishLabel",text="HBear",style=shape.labeldown,location=location.absolute,color=bearColor18,textcolor=textColor18)
//ChaikinMoneyFlow////////////////////////////////////////////////////////////
length19=50
ad19=close==highandclose==loworhigh==low?0:((2*close-low-high)/(high-low))*volume
cmf=sum(ad19,length19)/sum(volume,length19)
//plot(cmf,color=#43A047,title="MF")
//hline(0,color=#787B86,title="Zero",linestyle=hline.style_dashed)
//VWAP//////////////////////////////////////////////////////////////////////////
computeVWAP(src20,isNewPeriod,stDevMultiplier)=>
varfloatsumSrcVol=na
varfloatsumVol=na
varfloatsumSrcSrcVol=na

sumSrcVol:=isNewPeriod?src20*volume:src20*volume+sumSrcVol[1]
sumVol:=isNewPeriod?volume:volume+sumVol[1]
//sumSrcSrcVolcalculatesthedividendoftheequationthatislaterusedtocalculatethestandarddeviation
sumSrcSrcVol:=isNewPeriod?volume*pow(src20,2):volume*pow(src20,2)+sumSrcSrcVol[1]

_vwap=sumSrcVol/sumVol
variance=sumSrcSrcVol/sumVol-pow(_vwap,2)
variance:=variance<0?0:variance
stDev=sqrt(variance)

lowerBand20=_vwap-stDev*stDevMultiplier
upperBand20=_vwap+stDev*stDevMultiplier

[_vwap,lowerBand20,upperBand20]
hideonDWM=false
varanchor="Session"
src20=hlc3
offset20=0
showBands=true
stdevMult=1.0
timeChange(period)=>
change(time(period))
new_earnings=earnings(syminfo.tickerid,earnings.actual,barmerge.gaps_on,barmerge.lookahead_on)
new_dividends=dividends(syminfo.tickerid,dividends.gross,barmerge.gaps_on,barmerge.lookahead_on)
new_split=splits(syminfo.tickerid,splits.denominator,barmerge.gaps_on,barmerge.lookahead_on)
tcD=timeChange("D")
tcW=timeChange("W")
tcM=timeChange("M")
tc3M=timeChange("3M")
tc12M=timeChange("12M")
isNewPeriod=anchor=="Earnings"?new_earnings:
anchor=="Dividends"?new_dividends:
anchor=="Splits"?new_split:
na(src20[1])?true:
anchor=="Session"?tcD:
anchor=="Week"?tcW:
anchor=="Month"?tcM:
anchor=="Quarter"?tc3M:
anchor=="Year"?tc12M:
anchor=="Decade"?tc12Mandyear%10==0:
anchor=="Century"?tc12Mandyear%100==0:
false

floatvwapValue=na
floatstd=na
floatupperBandValue=na
floatlowerBandValue=na
ifnot(hideonDWMandtimeframe.isdwm)
[_vwap,bottom,top]=computeVWAP(src20,isNewPeriod,stdevMult)
vwapValue:=_vwap
upperBandValue:=showBands?top:na
lowerBandValue:=showBands?bottom:na
//plot(vwapValue,title="VWAP",color=#2962FF,offset=offset)
//upperBand20=plot(upperBandValue,title="UpperBand",color=color.green,offset=offset)
//lowerBand20=plot(lowerBandValue,title="LowerBand",color=color.green,offset=offset)
//fill(upperBand20,lowerBand20,title="BandsFill",color=showBands?color.new(color.green,95):na)
//CandlePatterns///////////////////////////////////////////////////////////////
//BullishEngulfing
C_DownTrend=true
C_UpTrend=true
vartrendRule1="SMA50"
vartrendRule2="SMA50,SMA200"
vartrendRule=trendRule1
iftrendRule==trendRule1
priceAvg=sma(close,50)
C_DownTrend:=close<priceAvg
C_UpTrend:=close>priceAvg
iftrendRule==trendRule2
sma200=sma(close,200)
sma50=sma(close,50)
C_DownTrend:=close<sma50andsma50<sma200
C_UpTrend:=close>sma50andsma50>sma200
C_Len=14//emadepthforbodyAvg
C_ShadowPercent=5.0//sizeofshadows
C_ShadowEqualsPercent=100.0
C_DojiBodyPercent=5.0
C_Factor=2.0//showsthenumberoftimestheshadowdominatesthecandlestickbody
C_BodyHi=max(close,open)
C_BodyLo=min(close,open)
C_Body=C_BodyHi-C_BodyLo
C_BodyAvg=ema(C_Body,C_Len)
C_SmallBody=C_Body<C_BodyAvg
C_LongBody=C_Body>C_BodyAvg
C_UpShadow=high-C_BodyHi
C_DnShadow=C_BodyLo-low
C_HasUpShadow=C_UpShadow>C_ShadowPercent/100*C_Body
C_HasDnShadow=C_DnShadow>C_ShadowPercent/100*C_Body
C_WhiteBody=open<close
C_BlackBody=open>close
C_Range=high-low
C_IsInsideBar=C_BodyHi[1]>C_BodyHiandC_BodyLo[1]<C_BodyLo
C_BodyMiddle=C_Body/2+C_BodyLo
C_ShadowEquals=C_UpShadow==C_DnShadowor(abs(C_UpShadow-C_DnShadow)/C_DnShadow*100)<C_ShadowEqualsPercentand(abs(C_DnShadow-C_UpShadow)/C_UpShadow*100)<C_ShadowEqualsPercent
C_IsDojiBody=C_Range>0andC_Body<=C_Range*C_DojiBodyPercent/100
C_Doji=C_IsDojiBodyandC_ShadowEquals
patternLabelPosLow=low-(atr(30)*0.6)
patternLabelPosHigh=high+(atr(30)*0.6)
label_color_bullish=color.blue
C_EngulfingBullishNumberOfCandles=2
C_EngulfingBullish=C_DownTrendandC_WhiteBodyandC_LongBodyandC_BlackBody[1]andC_SmallBody[1]andclose>=open[1]andopen<=close[1]and(close>open[1]oropen<close[1])
ifC_EngulfingBullish
varttBullishEngulfing="Engulfing\nAttheendofagivendownwardtrend,therewillmostlikelybeareversalpattern.Todistinguishthefirstday,thiscandlestickpatternusesasmallbody,followedbyadaywherethecandlebodyfullyovertakesthebodyfromthedaybefore,andclosesinthetrend’soppositedirection.Althoughsimilartotheoutsidereversalchartpattern,itisnotessentialforthispatterntocompletelyovertaketherange(hightolow),ratheronlytheopenandtheclose."
//label.new(bar_index,patternLabelPosLow,text="BE",style=label.style_label_up,color=label_color_bullish,textcolor=color.white,tooltip=ttBullishEngulfing)
//bgcolor(highest(C_EngulfingBullish?1:0,C_EngulfingBullishNumberOfCandles)!=0?color.blue:na,offset=-(C_EngulfingBullishNumberOfCandles-1))
//BearishEngulfing
label_color_bearish=color.red
C_EngulfingBearishNumberOfCandles=2
C_EngulfingBearish=C_UpTrendandC_BlackBodyandC_LongBodyandC_WhiteBody[1]andC_SmallBody[1]andclose<=open[1]andopen>=close[1]and(close<open[1]oropen>close[1])
ifC_EngulfingBearish
varttBearishEngulfing="Engulfing\nAttheendofagivenuptrend,areversalpatternwillmostlikelyappear.Duringthefirstday,thiscandlestickpatternusesasmallbody.Itisthenfollowedbyadaywherethecandlebodyfullyovertakesthebodyfromthedaybeforeitandclosesinthetrend’soppositedirection.Althoughsimilartotheoutsidereversalchartpattern,itisnotessentialforthispatterntofullyovertaketherange(hightolow),ratheronlytheopenandtheclose."
//label.new(bar_index,patternLabelPosHigh,text="BE",style=label.style_label_down,color=label_color_bearish,textcolor=color.white,tooltip=ttBearishEngulfing)
//bgcolor(highest(C_EngulfingBearish?1:0,C_EngulfingBearishNumberOfCandles)!=0?color.red:na,offset=-(C_EngulfingBearishNumberOfCandles-1))
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//SIGNALSCORES▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
//AlternateSignalsOption
alternatesignals=input(title="AlternateSignals",defval=true)
//PositionOptions
longpositions=input(title="BUYPositions",defval=true)
shortpositions=input(title="SELLPositions",defval=true)
//StopLossWarningOption
stoplosspercent=input(title="StopLossWarning(%)",type=input.float,defval=-2.5,minval=-50,maxval=0,step=.1)/100
//ScoreRequirements
stronglongscore=input(defval=10,minval=0,maxval=1000,title="RequiredStrongBUYScore")
strongshortscore=input(defval=10,minval=0,maxval=1000,title="RequiredStrongSELLScore")
weaklongscore=input(defval=8,minval=0,maxval=1000,title="RequiredWeakBUYScore")
weakshortscore=input(defval=8,minval=0,maxval=1000,title="RequiredWeakSELLScore")
//TrendIndicatorSignals///////////////////////////////////////////////////////
//EMASignals
emadirectionimportance=input(defval=2,minval=0,maxval=100,title="EMATrendDirectionImportance")
emadirectionup=out5<close?emadirectionimportance:0
emadirectionupstatus=emadirectionup?"EMATrendDirectionUp":na
emadirectiondown=out5>close?emadirectionimportance:0
emadirectiondownstatus=emadirectiondown?"EMATrendDirectionDown":na
emapushpullimportance=input(defval=2,minval=0,maxval=100,title="EMAPressureImportance")
emapushup=out2>out2[1]andout3<out3[1]?emapushpullimportance:0
emapushupstatus=emapushup?"EMAPushingUp":na
emapulldown=out2<out2[1]andout3>out3[1]?emapushpullimportance:0
emapulldownstatus=emapulldown?"EMAPullingDown":na
//SuperTrendSignals
supertrenddirimportance=input(defval=0,minval=0,maxval=100,title="SuperTrendDirectionImportance")
supertrendup=direction<0?supertrenddirimportance:0
supertrendupstatus=supertrendup?"SuperTrendDirectionUp":na
supertrenddown=direction>0?supertrenddirimportance:0
supertrenddownstatus=supertrenddown?"SuperTrendDirectionDown":na
supertrendrevimportance=input(defval=4,minval=0,maxval=100,title="SuperTrendReversalImportance")
supertrendrevup=direction<0anddirection[1]>0[1]?supertrendrevimportance:0
supertrendrevupstatus=supertrendrevup?"SuperTrendReversedUp":na
supertrendrevdown=direction>0anddirection[1]<0[1]?supertrendrevimportance:0
supertrendrevdownstatus=supertrendrevdown?"SuperTrendReversedDown":na
//ParabolicSARSignals
psardirimportance=input(defval=0,minval=0,maxval=100,title="ParabolicSARDirectionImportance")
psardirup=psar<close?psardirimportance:0
psardirupstatus=psardirup?"PSARDirectionUp":na
psardirdown=psar>close?psardirimportance:0
psardirdownstatus=psardirdown?"PSARDirectionDown":na
psarrevimportance=input(defval=3,minval=0,maxval=100,title="ParabolicSARReversalImportance")
psarrevup=psar<closeandpsar[1]>close[1]?psarrevimportance:0
psarrevupstatus=psarrevup?"PSARReversedUp":na
psarrevdown=psar>closeandpsar[1]<close?psarrevimportance:0
psarrevdownstatus=psarrevdown?"PSARReversedDown":na
//HMASignals
hmacloseposimportance=input(defval=1,minval=0,maxval=100,title="HMATrendDirectionImportance")
hmacloseposup=hma<closeandhma[1]?hmacloseposimportance:0
hmacloseposupstatus=hmacloseposup?"PriceCrossedOverHMA":na
hmacloseposdown=hma>close?hmacloseposimportance:0
hmacloseposdownstatus=hmacloseposdown?"PriceCrossedUnderHMA":na
hmapivotimportance=input(defval=3,minval=0,maxval=100,title="HMAPivotImportance")
hmapivotup=hma>hma[1]andhma[1]<hma[2]?hmapivotimportance:0
hmapivotupstatus=hmapivotup?"HMAPivotUp":na
hmapivotdown=hma<hma[1]andhma[1]>hma[2]?hmapivotimportance:0
hmapivotdownstatus=hmapivotdown?"HMAPivotDown":na
//MomentumIndicatorSignals////////////////////////////////////////////////////
//RSISignals
rsidivimportance=input(defval=4,minval=0,maxval=100,title="RSIDivergenceImportance")
rsidivup=bullCond11orbullCond11[1]orbullCond11[2]?rsidivimportance:0
rsidivupstatus=rsidivup?"BullishRSIDivergence":na
rsidivdown=bearCond11orbearCond11[1]orbearCond11[2]?rsidivimportance:0
rsidivdownstatus=rsidivdown?"BearishRSIDivergence":na
rsilevelimportance=input(defval=0,minval=0,maxval=100,title="RSILevelImportance")
rsioversold=osc11<30?rsilevelimportance:0
rsioversoldstatus=rsioversold?"RSIOversold":na
rsioverbought=osc11>70?rsilevelimportance:0
rsioverboughtstatus=rsioverbought?"RSIOverbought":na
rsidirectionimportance=input(defval=1,minval=0,maxval=100,title="RSICross50-LineImportance")
rsicrossup=(osc11>50andosc11[1]<50)or(osc11>50andosc11[2]<50)?rsidirectionimportance:0
rsicrossupstatus=rsicrossup?"RSICrossed50-LineUp":na
rsicrossdown=(osc11<50andosc11[1]>50)or(osc11<50andosc11[2]>50)?rsidirectionimportance:0
rsicrossdownstatus=rsicrossdown?"RSICrossed50-LineDown":na
//MACDSignals
macddivimportance=input(defval=0,minval=0,maxval=100,title="MACDDivergenceImportance")
macddivup=bullCond12orbullCond12[1]orbullCond12[2]?macddivimportance:0
macddivupstatus=macddivup?"BullishMACDDivergence":na
macddivdown=bearCond12orbearCond12[1]orbearCond12[2]?macddivimportance:0
macddivdownstatus=macddivdown?"BearishMACDDivergence":na
histpivotimportance=input(defval=1,minval=0,maxval=100,title="MACDHistogramPivotImportance")
histpivotup=hist>hist[1]andhist[1]<hist[2]andhist<0?histpivotimportance:0
histpivotupstatus=histpivotup?"MACDHistogramPivotUp":na
histpivotdown=hist<hist[1]andhist[1]>hist[2]andhist>0?histpivotimportance:0
histpivotdownstatus=histpivotdown?"MACDHistogramPivotDown":na
macdcrosssignalimportance=input(defval=1,minval=0,maxval=100,title="MACDCrossSignalImportance")
macdcrosssignalup=macd>signalandmacd[1]<signal[1]andsignal<0?macdcrosssignalimportance:0
macdcrosssignalupstatus=macdcrosssignalup?"MACDCrossedSignalUp":na
macdcrosssignaldown=macd<signalandmacd[1]>signal[1]andsignal>0?macdcrosssignalimportance:0
macdcrosssignaldownstatus=macdcrosssignaldown?"MACDCrossedSignalDown":na
//WaveTrendSignals
wtdivimportance=input(defval=0,minval=0,maxval=100,title="WaveTrendDivergenceImportance")
wtdivup=bullCond13orbullCond13[1]orbullCond13[2]?wtdivimportance:0
wtdivupstatus=wtdivup?"BullishWaveTrendDivergence":na
wtdivdown=bearCond13orbearCond13[1]orbearCond13[2]?wtdivimportance:0
wtdivdownstatus=wtdivdown?"BearishWaveTrendDivergence":na
wtcrosssignalimportance=input(defval=4,minval=0,maxval=100,title="WaveTrendCrossSignalImportance")
wtcrosssignalup=wt1>wt2andwt1[1]<wt2[1]andwt2<-10?wtcrosssignalimportance:0
wtcrosssignalupstatus=wtcrosssignalup?"WaveTrendCrossedSignalUp":na
wtcrosssignaldown=wt1<wt2andwt1[1]>wt2[1]andwt2>10?wtcrosssignalimportance:0
wtcrosssignaldownstatus=wtcrosssignaldown?"WaveTrendCrossedSignalDown":na
//StochasticSignals
sdivimportance=input(defval=1,minval=0,maxval=100,title="StochasticDivergenceImportance")
sdivup=bullCond14orbullCond14[1]orbullCond14[2]?sdivimportance:0
sdivupstatus=sdivup?"BullishStochDivergence":na
sdivdown=bearCond14orbearCond14[1]orbearCond14[2]?sdivimportance:0
sdivdownstatus=sdivdown?"BearishStochDivergence":na
scrosssignalimportance=input(defval=1,minval=0,maxval=100,title="StochCrossSignalImportance")
scrosssignalup=k14>d14andk14[1]<d14[1]?scrosssignalimportance:0
scrosssignalupstatus=scrosssignalup?"StochCrossedSignalUp":na
scrosssignaldown=k14<d14andk14[1]>d14[1]?scrosssignalimportance:0
scrosssignaldownstatus=scrosssignaldown?"StochCrossedSignalDown":na
//VolatilityIndicators/////////////////////////////////////////////////////////
//BollingerBandsSignals
bbcontimportance=input(defval=0,minval=0,maxval=100,title="BollingerBandsContactImportance")
bbcontup=close<lower?bbcontimportance:0
bbcontupstatus=bbcontup?"PriceContactedLowerBB":na
bbcontdown=open>upper?bbcontimportance:0
bbcontdownstatus=bbcontdown?"PriceContactedUpperBB":na
//AverageTrueRangeSignals
atrrevimportance=input(defval=1,minval=0,maxval=100,title="ATRReversalImportance")
atrrevup=buySignal?atrrevimportance:0
atrrevupstatus=atrrevup?"ATRReversedUp":na
atrrevdown=sellSignal?atrrevimportance:0
atrrevdownstatus=atrrevdown?"ATRReversedDown":na
//RelativeVolatilityIndexSignals
rviposimportance=input(defval=3,minval=0,maxval=100,title="RVIPositionImportance")
rviposup=rvi>25andrvi[1]<40?rviposimportance:0
rviposupstatus=rviposup?"RVIVolatilityIncreasing":na
rviposdown=rvi<75andrvi[1]>60?rviposimportance:0
rviposdownstatus=rviposdown?"RVIVolatilityDecreasing":na
rvidivimportance=input(defval=4,minval=0,maxval=100,title="RVIDivergenceImportance")
rvidivup=bullCond15orbullCond15[1]orbullCond15[2]?rvidivimportance:0
rvidivupstatus=rvidivup?"BullishRVIDivergence":na
rvidivdown=bearCond15orbearCond15[1]orbearCond15[2]?rvidivimportance:0
rvidivdownstatus=rvidivdown?"BearishRVIDivergence":na
//SupportandResistanceSignals
srcrossimportance=input(defval=0,minval=0,maxval=100,title="Support/ResistanceCrossImportance")
srcrossup=buy1orbuy2orbuy3orbuy4orbuy5orbuy6orbuy7orbuy8?srcrossimportance:0
srcrossupstatus=srcrossup?"CrossedKeyLevelUp":na
srcrossdown=sell1orsell2orsell3orsell4orsell5orsell6orsell7orsell8?srcrossimportance:0
srcrossdownstatus=srcrossdown?"CrossedKeyLevelDown":na
//VolumeIndicatorSignals//////////////////////////////////////////////////////
//OnBalanceVolumeDivergenceSignals
obvdivimportance=input(defval=0,minval=0,maxval=100,title="OBVDivergenceImportance")
obvdivup=bullCond18orbullCond18[1]orbullCond18[2]?obvdivimportance:0
obvdivupstatus=obvdivup?"BullishOBVDivergence":na
obvdivdown=bearCond18orbearCond18[1]orbearCond18[2]?obvdivimportance:0
obvdivdownstatus=obvdivdown?"BearishOBVDivergence":na
//ChaikinMoneyFlowSignals
cmfcrossimportance=input(defval=0,minval=0,maxval=100,title="CMFCross50-LineImportance")
cmfcrossup=cmf>0andcmf[1]<0?cmfcrossimportance:0
cmfcrossupstatus=cmfcrossup?"CMFCrossed50-LineUp":na
cmfcrossdown=cmf<0andcmf[1]>0?cmfcrossimportance:0
cmfcrossdownstatus=cmfcrossdown?"CMFCrossed50-LineDown":na
cmflevimportance=input(defval=0,minval=0,maxval=100,title="CMFLevelImportance")
cmflevup=cmf>0?cmflevimportance:0
cmflevupstatus=cmflevup?"CMFLevelUp":na
cmflevdown=cmf<0?cmflevimportance:0
cmflevdownstatus=cmflevdown?"CMFLevelDown":na
//VWAPSignals
vwapcrossimportance=input(defval=0,minval=0,maxval=100,title="VWAPCrossHMAImportance")
vwapcrossup=hma<vwapValueandhma[1]>vwapValue[1]?vwapcrossimportance:0
vwapcrossupstatus=vwapcrossup?"VWAPCrossedAboveHMA":na
vwapcrossdown=hma>vwapValueandhma[1]<vwapValue[1]?vwapcrossimportance:0
vwapcrossdownstatus=vwapcrossdown?"VWAPCrossedBelowHMA":na
vwaptrendimportance=input(defval=0,minval=0,maxval=100,title="VWAPTrendImportance")
vwaptrendup=out2>vwapValue?vwaptrendimportance:0
vwaptrendupstatus=vwaptrendup?"VWAPUpTrend":na
vwaptrenddown=out2<vwapValue?vwaptrendimportance:0
vwaptrenddownstatus=vwaptrenddown?"VWAPDownTrend":na
//CandlePatternsSignals
engulfingcandleimportance=input(defval=0,minval=0,maxval=100,title="EngulfingCandleImportance")
bulleng=C_EngulfingBullish?engulfingcandleimportance:0
bullengstatus=bulleng?"BullishEngulfingCandle":na
beareng=C_EngulfingBearish?engulfingcandleimportance:0
bearengstatus=beareng?"BearishEngulfingCandle":na
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//COLLECTSIGNALS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
//ClassifyEntries
stronglongentrysignal=emadirectionup+emapushup+supertrendup+supertrendrevup+psardirup+psarrevup+hmacloseposup+hmapivotup+rsidivup+rsioversold+rsicrossup+macddivup+histpivotup+macdcrosssignalup+wtdivup+wtcrosssignalup+sdivup+scrosssignalup+bbcontup+atrrevup+rviposup+rvidivup+srcrossup+obvdivup+cmfcrossup+cmflevup+vwapcrossup+vwaptrendup+bulleng>=stronglongscore
strongshortentrysignal=emadirectiondown+emapulldown+supertrenddown+supertrendrevdown+psardirdown+psarrevdown+hmacloseposdown+hmapivotdown+rsidivdown+rsioverbought+rsicrossdown+macddivdown+histpivotdown+macdcrosssignaldown+wtdivdown+wtcrosssignaldown+sdivdown+scrosssignaldown+bbcontdown+atrrevdown+rviposdown+rvidivdown+srcrossdown+obvdivdown+cmfcrossdown+cmflevdown+vwapcrossdown+vwaptrenddown+beareng>=strongshortscore
weaklongentrysignal=emadirectionup+emapushup+supertrendup+supertrendrevup+psardirup+psarrevup+hmacloseposup+hmapivotup+rsidivup+rsioversold+rsicrossup+macddivup+histpivotup+macdcrosssignalup+wtdivup+wtcrosssignalup+sdivup+scrosssignalup+bbcontup+atrrevup+rviposup+rvidivup+srcrossup+obvdivup+cmfcrossup+cmflevup+vwapcrossup+vwaptrendup+bulleng>=weaklongscore
weakshortentrysignal=emadirectiondown+emapulldown+supertrenddown+supertrendrevdown+psardirdown+psarrevdown+hmacloseposdown+hmapivotdown+rsidivdown+rsioverbought+rsicrossdown+macddivdown+histpivotdown+macdcrosssignaldown+wtdivdown+wtcrosssignaldown+sdivdown+scrosssignaldown+bbcontdown+atrrevdown+rviposdown+rvidivdown+srcrossdown+obvdivdown+cmfcrossdown+cmflevdown+vwapcrossdown+vwaptrenddown+beareng>=weakshortscore
//AlternateEntrySignals
varpos=0
ifstronglongentrysignalandpos<=0
pos:=1
ifstrongshortentrysignalandpos>=0
pos:=-1
longentry=pos==1and(pos!=1)[1]
shortentry=pos==-1and(pos!=-1)[1]
alternatelong=alternatesignals?longentry:stronglongentrysignal
alternateshort=alternatesignals?shortentry:strongshortentrysignal
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//PLOTSIGNALS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
plotshape(tradetrendoption?alternatelongandmabuy:alternatelong,title="StrongLongLabel",style=shape.labelup,location=location.belowbar,color=#228B22,text="BUY",textcolor=color.white,size=size.small)
plotshape(tradetrendoption?alternateshortandmasell:alternateshort,title="StrongShortLabel",style=shape.labeldown,location=location.abovebar,color=#FF0000,text="SELL",textcolor=color.white,size=size.small)
plotshape(weaklongentrysignal,title="WeakBuyTriangle",style=shape.triangleup,location=location.belowbar,color=color.new(#228B22,100),size=size.small)
plotshape(weakshortentrysignal,title="WeakSellTriangle",style=shape.triangledown,location=location.abovebar,color=color.new(#FF0000,100),size=size.small)
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//PLOTSTATUS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
vartablestatuswindow=table.new(position.top_right,100,100,border_width=2)
//TrendStatus//////////////////////////////////////////////////////////////////
txt1="🡇TREND🡇"
table.cell(statuswindow,0,0,text=txt1,bgcolor=color.new(#000000,100),text_color=color.white,text_size=size.small)
//EMAStatus
ifemadirectionup
table.cell(statuswindow,0,0,text=tostring(emadirectionupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifemadirectiondown
table.cell(statuswindow,0,0,text=tostring(emadirectiondownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifemapushup?1:na
table.cell(statuswindow,0,0,text=tostring(emapushupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifemapushup?na:1
table.clear(statuswindow,0,0)
ifemapulldown?1:na
table.cell(statuswindow,0,0,text=tostring(emapulldownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifemapulldown?na:1
table.clear(statuswindow,0,0)
//HMAStatus
ifhmacloseposup
table.cell(statuswindow,0,0,text=tostring(hmacloseposupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifhmacloseposdown
table.cell(statuswindow,0,0,text=tostring(hmacloseposdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifhmapivotup?1:na
table.cell(statuswindow,0,0,text=tostring(hmapivotupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifhmapivotup?na:1
table.clear(statuswindow,0,0)
ifhmapivotdown?1:na
table.cell(statuswindow,0,0,text=tostring(hmapivotdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifhmapivotdown?na:1
table.clear(statuswindow,0,0)
//MomentumStatus///////////////////////////////////////////////////////////////
txt2="🡇MOMENTUM🡇"
table.cell(statuswindow,0,0,text=txt2,bgcolor=color.new(#000000,100),text_color=color.white,text_size=size.small)

//RSIStatus
ifrsidivup?1:na
table.cell(statuswindow,0,0,text=tostring(rsidivupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifrsidivup?na:1
table.clear(statuswindow,0,0)
ifrsidivdown?1:na
table.cell(statuswindow,0,0,text=tostring(rsidivdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifrsidivdown?na:1
table.clear(statuswindow,0,0)
ifrsioversold?1:na
table.cell(statuswindow,0,0,text=tostring(rsioversoldstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifrsioversold?na:1
table.clear(statuswindow,0,0)
ifrsioverbought?1:na
table.cell(statuswindow,0,0,text=tostring(rsioverboughtstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifrsioverbought?na:1
table.clear(statuswindow,0,0)
ifrsicrossup?1:na
table.cell(statuswindow,0,0,text=tostring(rsicrossupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifrsicrossup?na:1
table.clear(statuswindow,0,0)
ifrsicrossdown?1:na
table.cell(statuswindow,0,0,text=tostring(rsicrossdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifrsicrossdown?na:1
table.clear(statuswindow,0,0)
//MACDStatus
ifmacddivup?1:na
table.cell(statuswindow,0,0,text=tostring(macddivupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifmacddivup?na:1
table.clear(statuswindow,0,0)
ifmacddivdown?1:na
table.cell(statuswindow,0,0,text=tostring(macddivdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifmacddivdown?na:1
table.clear(statuswindow,0,0)
ifhistpivotup?1:na
table.cell(statuswindow,0,0,text=tostring(histpivotupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifhistpivotup?na:1
table.clear(statuswindow,0,0)
ifhistpivotdown?1:na
table.cell(statuswindow,0,0,text=tostring(histpivotdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifhistpivotdown?na:1
table.clear(statuswindow,0,0)
ifmacdcrosssignalup?1:na
table.cell(statuswindow,0,0,text=tostring(macdcrosssignalupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifmacdcrosssignalup?na:1
table.clear(statuswindow,0,0)
ifmacdcrosssignaldown?1:na
table.cell(statuswindow,0,0,text=tostring(macdcrosssignaldownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifmacdcrosssignaldown?na:1
table.clear(statuswindow,0,0)
//WaveTrendStatus
ifwtdivup?1:na
table.cell(statuswindow,0,0,text=tostring(wtdivupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifwtdivup?na:1
table.clear(statuswindow,0,0)
ifwtdivdown?1:na
table.cell(statuswindow,0,0,text=tostring(wtdivdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifwtdivdown?na:1
table.clear(statuswindow,0,0)
ifwtcrosssignalup?1:na
table.cell(statuswindow,0,0,text=tostring(wtcrosssignalupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifwtcrosssignalup?na:1
table.clear(statuswindow,0,0)
ifwtcrosssignaldown?1:na
table.cell(statuswindow,0,0,text=tostring(wtcrosssignaldownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifwtcrosssignaldown?na:1
table.clear(statuswindow,0,0)


//VolatilityStatus/////////////////////////////////////////////////////////////////
txt3="🡇VOLATILITY🡇"
table.cell(statuswindow,0,0,text=txt3,bgcolor=color.new(#000000,100),text_color=color.white,text_size=size.small)


//RVIStatus
ifrviposup?1:na
table.cell(statuswindow,0,0,text=tostring(rviposupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifrviposup?na:1
table.clear(statuswindow,0,0)
ifrviposdown?1:na
table.cell(statuswindow,0,0,text=tostring(rviposdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifrviposdown?na:1
table.clear(statuswindow,0,0)
ifrvidivup?1:na
table.cell(statuswindow,0,0,text=tostring(rvidivupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifrvidivup?na:1
table.clear(statuswindow,0,0)
ifrvidivdown?1:na
table.cell(statuswindow,0,0,text=tostring(rvidivdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifrvidivdown?na:1
table.clear(statuswindow,0,0)


//VolumeStatus/////////////////////////////////////////////////////////////////

//VWAPStatus
ifvwapcrossup?1:na
table.cell(statuswindow,0,0,text=tostring(vwapcrossupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifvwapcrossup?na:1
table.clear(statuswindow,0,0)
ifvwapcrossdown?1:na
table.cell(statuswindow,0,0,text=tostring(vwapcrossdownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)
ifvwapcrossdown?na:1
table.clear(statuswindow,0,0)
ifvwaptrendup?1:na
table.cell(statuswindow,0,0,text=tostring(vwaptrendupstatus),bgcolor=color.new(#00bcd4,50),text_color=color.white,text_size=size.small)
ifvwaptrenddown?1:na
table.cell(statuswindow,0,0,text=tostring(vwaptrenddownstatus),bgcolor=color.new(#e91e63,50),text_color=color.white,text_size=size.small)

//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//STOPLOSSWARNINGS▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
//StopLossCriteria
longstoploss=strategy.position_avg_price*(1+stoplosspercent)
shortstoploss=strategy.position_avg_price*(1-stoplosspercent)
printstoplong=longstoploss>closeandlongstoploss[1]<close[1]andstrategy.position_size>0
printstopshort=shortstoploss<closeandshortstoploss[1]>close[1]andstrategy.position_size<0
//StopLossLines
plot(strategy.position_size>0?longstoploss:na,style=plot.style_line,color=color.new(color.yellow,50),linewidth=1,title="StopLongLine",display=display.none)
plot(strategy.position_size<0?shortstoploss:na,style=plot.style_line,color=color.new(color.yellow,50),linewidth=1,title="StopShortLine",display=display.none)
//StopLossLabels
plotshape(printstoplong,title="StopLongLabel",style=shape.labelup,location=location.belowbar,color=color.yellow,text="𝐒𝐓𝐎𝐏LOSS",textcolor=color.black,size=size.tiny)
plotshape(printstopshort,title="StopShortLabel",style=shape.labeldown,location=location.abovebar,color=color.yellow,text="𝐒𝐓𝐎𝐏LOSS",textcolor=color.black,size=size.tiny)
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
//Buy
iftradetrendoption?alternatelongandmabuyandlongpositions:alternatelongandlongpositions
strategy.entry("longposition",strategy.long,comment="BuyEntry")
if(shortentryorprintstoplong)andlongpositions
strategy.close("longposition",comment="ExitBuy")
//Sell
iftradetrendoption?alternateshortandmasellandshortpositions:alternateshortandshortpositions
strategy.entry("shortposition",strategy.short,comment="SellEntry")
if(longentryorprintstopshort)andshortpositions
strategy.close("shortposition",comment="ExitSell")
//Alerts
ttbuystring="Inputyourcustomalertmessagehere.IntheAlertsettings,choose\"AccurateBuy&Sell\"and\"Alert()functionccallsonly\"\nIfyou'reusinga3CommasBot,makesuretoformatyourmessagecorrectlywithforwardslashesinfrontofeachquotation,youcanfindvideosabouthowtodothisonYouTube.Orask3CommassupportabouthowtoformatthemessageforPineScript."
ttsellstring="Inputyourcustomalertmessagehere.IntheAlertsettings,choose\"AccurateBuy&Sell\"and\"Alert()functionccallsonly\"\nIfyou'reusinga3CommasBot,makesuretoformatyourmessagecorrectlywithforwardslashesinfrontofeachquotation,youcanfindvideosabouthowtodothisonYouTube.Orask3CommassupportabouthowtoformatthemessageforPineScript."
ttstopstring="Inputyourcustomalertmessagehere.IntheAlertsettings,choose\"AccurateBuy&Sell\"and\"Alert()functionccallsonly\"\nIfyou'reusinga3CommasBot,makesuretoformatyourmessagecorrectlywithforwardslashesinfrontofeachquotation,youcanfindvideosabouthowtodothisonYouTube.Orask3CommassupportabouthowtoformatthemessageforPineScript."
usebuyalert=input(defval=true,title="UseBUYAlert",group="AlertMessages")
buystring=input(title="BuyAlertMessage",defval="BUY",type=input.string,confirm=false,group="AlertMessages",tooltip=ttbuystring)
usesellalert=input(defval=true,title="UseSELLAlert",group="AlertMessages")
sellstring=input(title="SellAlertMessage",defval="SELL",type=input.string,confirm=false,group="AlertMessages",tooltip=ttsellstring)
usestopalert=input(defval=true,title="UseSTOPAlert",group="AlertMessages")
stopstring=input(title="StopAlertMessage",defval="STOP",type=input.string,confirm=false,group="AlertMessages",tooltip=ttstopstring)
iflongentryandlongpositionsandusebuyalert
alert(buystring,alert.freq_once_per_bar)
ifshortentryandshortpositionsandusesellalert
alert(sellstring,alert.freq_once_per_bar)
ifprintstoplongorprintstopshortandusestopalert
alert(stopstring,alert.freq_once_per_bar)
//END▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
////////////////////////////////////////////////////////////////////////////////
Expand (1325 lines)
